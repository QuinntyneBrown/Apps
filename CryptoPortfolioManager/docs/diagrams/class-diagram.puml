@startuml CryptoPortfolioManager_ClassDiagram

class User {
  - Id: Guid
  - Email: string
  - Name: string
}

class Wallet {
  - Id: Guid
  - UserId: Guid
  - Address: string
  - Type: WalletType
  - Blockchain: string
  - Label: string
  - CreatedAt: DateTime
}

class WalletBalance {
  - Id: Guid
  - WalletId: Guid
  - CoinSymbol: string
  - Balance: decimal
  - FiatValue: decimal
  - UpdatedAt: DateTime
}

class Transaction {
  - Id: Guid
  - WalletId: Guid
  - Hash: string
  - Type: TransactionType
  - Amount: decimal
  - Coin: string
  - FiatValue: decimal
  - Category: string
  - Timestamp: DateTime
}

class Trade {
  - Id: Guid
  - UserId: Guid
  - Type: TradeType
  - FromCoin: string
  - ToCoin: string
  - Amount: decimal
  - Price: decimal
  - CostBasis: decimal
  - RealizedGain: decimal
  - TradeDate: DateTime
}

class Portfolio {
  - Id: Guid
  - UserId: Guid
  - TotalValue: decimal
  - LastCalculated: DateTime
  --
  + CalculateValue(): decimal
  + GetAllocation(): Dictionary
}

class PriceAlert {
  - Id: Guid
  - UserId: Guid
  - CoinSymbol: string
  - AlertType: AlertType
  - TargetPrice: decimal
  - Triggered: bool
}

class TaxReport {
  - Id: Guid
  - UserId: Guid
  - TaxYear: int
  - TotalGains: decimal
  - TotalLosses: decimal
  - TotalIncome: decimal
  - CostBasisMethod: string
}

class CryptoIncome {
  - Id: Guid
  - UserId: Guid
  - Type: IncomeType
  - Coin: string
  - Amount: decimal
  - FiatValueAtReceipt: decimal
  - Date: DateTime
  - Source: string
}

class PerformanceMetrics {
  - Id: Guid
  - UserId: Guid
  - Period: string
  - ROI: decimal
  - TotalReturn: decimal
  - BestAsset: string
  - WorstAsset: string
}

class SecurityAlert {
  - Id: Guid
  - UserId: Guid
  - Type: AlertType
  - RiskLevel: RiskLevel
  - DetectionTime: DateTime
  - Status: string
}

enum WalletType {
  Hot
  Cold
  Exchange
}

enum TransactionType {
  Receive
  Send
  Swap
}

enum TradeType {
  Purchase
  Sale
  Swap
}

enum AlertType {
  Above
  Below
  PercentageChange
}

enum IncomeType {
  Staking
  Mining
  Airdrop
}

enum RiskLevel {
  Low
  Medium
  High
  Critical
}

User "1" -- "0..*" Wallet
Wallet "1" -- "0..*" WalletBalance
Wallet "1" -- "0..*" Transaction
User "1" -- "0..*" Trade
User "1" -- "1" Portfolio
User "1" -- "0..*" PriceAlert
User "1" -- "0..*" TaxReport
User "1" -- "0..*" CryptoIncome
User "1" -- "0..*" PerformanceMetrics
User "1" -- "0..*" SecurityAlert

@enduml
