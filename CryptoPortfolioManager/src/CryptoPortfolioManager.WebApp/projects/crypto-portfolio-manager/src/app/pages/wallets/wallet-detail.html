<div class="wallet-detail" *ngIf="wallet$ | async as wallet">
  <div class="wallet-detail__header">
    <button mat-icon-button routerLink="/wallets" class="wallet-detail__back-button">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1 class="wallet-detail__title">{{ wallet.name }}</h1>
  </div>

  <div class="wallet-detail__info">
    <mat-card class="wallet-detail__info-card">
      <mat-card-header>
        <mat-card-title>Wallet Information</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="wallet-detail__info-grid">
          <div class="wallet-detail__info-item">
            <span class="wallet-detail__info-label">Type:</span>
            <span class="wallet-detail__info-value">{{ wallet.walletType }}</span>
          </div>
          <div class="wallet-detail__info-item">
            <span class="wallet-detail__info-label">Address:</span>
            <span class="wallet-detail__info-value">{{ wallet.address || 'N/A' }}</span>
          </div>
          <div class="wallet-detail__info-item">
            <span class="wallet-detail__info-label">Status:</span>
            <span class="wallet-detail__info-value">{{ wallet.isActive ? 'Active' : 'Inactive' }}</span>
          </div>
          <div class="wallet-detail__info-item">
            <span class="wallet-detail__info-label">Total Value:</span>
            <span class="wallet-detail__info-value wallet-detail__info-value--highlight">{{ wallet.totalValue | currency }}</span>
          </div>
          <div class="wallet-detail__info-item wallet-detail__info-item--full" *ngIf="wallet.notes">
            <span class="wallet-detail__info-label">Notes:</span>
            <span class="wallet-detail__info-value">{{ wallet.notes }}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <mat-card class="wallet-detail__section">
    <mat-card-header>
      <mat-card-title>Holdings</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="(holdings$ | async) || []" class="wallet-detail__table">
        <ng-container matColumnDef="symbol">
          <th mat-header-cell *matHeaderCellDef>Symbol</th>
          <td mat-cell *matCellDef="let holding">{{ holding.symbol }}</td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let holding">{{ holding.name }}</td>
        </ng-container>

        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef>Quantity</th>
          <td mat-cell *matCellDef="let holding">{{ holding.quantity }}</td>
        </ng-container>

        <ng-container matColumnDef="currentPrice">
          <th mat-header-cell *matHeaderCellDef>Current Price</th>
          <td mat-cell *matCellDef="let holding">{{ holding.currentPrice | currency }}</td>
        </ng-container>

        <ng-container matColumnDef="marketValue">
          <th mat-header-cell *matHeaderCellDef>Market Value</th>
          <td mat-cell *matCellDef="let holding">{{ holding.marketValue | currency }}</td>
        </ng-container>

        <ng-container matColumnDef="unrealizedGainLoss">
          <th mat-header-cell *matHeaderCellDef>Unrealized Gain/Loss</th>
          <td mat-cell *matCellDef="let holding">
            <span [class.wallet-detail__gain]="holding.unrealizedGainLoss > 0"
                  [class.wallet-detail__loss]="holding.unrealizedGainLoss < 0">
              {{ holding.unrealizedGainLoss | currency }}
            </span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="holdingsColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: holdingsColumns;"></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <mat-card class="wallet-detail__section">
    <mat-card-header>
      <mat-card-title>Transactions</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="(transactions$ | async) || []" class="wallet-detail__table">
        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Date</th>
          <td mat-cell *matCellDef="let transaction">{{ transaction.transactionDate | date }}</td>
        </ng-container>

        <ng-container matColumnDef="type">
          <th mat-header-cell *matHeaderCellDef>Type</th>
          <td mat-cell *matCellDef="let transaction">{{ transaction.transactionType }}</td>
        </ng-container>

        <ng-container matColumnDef="symbol">
          <th mat-header-cell *matHeaderCellDef>Symbol</th>
          <td mat-cell *matCellDef="let transaction">{{ transaction.symbol }}</td>
        </ng-container>

        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef>Quantity</th>
          <td mat-cell *matCellDef="let transaction">{{ transaction.quantity }}</td>
        </ng-container>

        <ng-container matColumnDef="pricePerUnit">
          <th mat-header-cell *matHeaderCellDef>Price Per Unit</th>
          <td mat-cell *matCellDef="let transaction">{{ transaction.pricePerUnit | currency }}</td>
        </ng-container>

        <ng-container matColumnDef="totalCost">
          <th mat-header-cell *matHeaderCellDef>Total Cost</th>
          <td mat-cell *matCellDef="let transaction">{{ transaction.totalCost | currency }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="transactionsColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: transactionsColumns;"></tr>
      </table>
    </mat-card-content>
  </mat-card>
</div>
