<div class="dashboard" *ngIf="stats$ | async as stats">
  <h1 class="dashboard__title">Dashboard</h1>

  <div class="dashboard__stats">
    <mat-card class="dashboard__stat-card">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">sentiment_satisfied</mat-icon>
        <mat-card-title>Mood Entries</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-value">{{ stats.moodEntriesCount }}</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/mood-entries">View All</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__stat-card">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">menu_book</mat-icon>
        <mat-card-title>Journals</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-value">{{ stats.journalsCount }}</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/journals">View All</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__stat-card">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">notification_important</mat-icon>
        <mat-card-title>Triggers</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-value">{{ stats.triggersCount }}</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/triggers">View All</button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="dashboard__recent">
    <mat-card class="dashboard__recent-card">
      <mat-card-header>
        <mat-card-title>Recent Mood Entries</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="stats.recentMoodEntries.length === 0" class="dashboard__empty">
          No mood entries yet
        </div>
        <div *ngFor="let entry of stats.recentMoodEntries" class="dashboard__recent-item">
          <div class="dashboard__recent-item-title">{{ entry.moodLevel }} / {{ entry.stressLevel }}</div>
          <div class="dashboard__recent-item-date">{{ entry.entryTime | date:'short' }}</div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="dashboard__recent-card">
      <mat-card-header>
        <mat-card-title>Recent Journals</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="stats.recentJournals.length === 0" class="dashboard__empty">
          No journals yet
        </div>
        <div *ngFor="let journal of stats.recentJournals" class="dashboard__recent-item">
          <div class="dashboard__recent-item-title">{{ journal.title }}</div>
          <div class="dashboard__recent-item-date">{{ journal.entryDate | date:'short' }}</div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
