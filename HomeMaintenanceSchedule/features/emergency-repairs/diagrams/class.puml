@startuml Emergency Repairs - Class Diagram

!define ENTITY_COLOR #E8F4F8
!define ENUM_COLOR #FFE6E6

class EmergencyRepair <<Entity>> ENTITY_COLOR {
    + Id: Guid
    + Title: string
    + Description: string
    + Type: EmergencyType
    + Severity: EmergencySeverity
    + Status: RepairStatus
    + ReportedDate: DateTime
    + ResponseDate: DateTime?
    + ResolvedDate: DateTime?
    + PropertyId: Guid
    + AssignedProviderId: Guid?
    + TemporarySolution: string
    + PhotoUrls: List<string>
    + VideoUrls: List<string>
    + EstimatedCost: decimal?
    + ActualCost: decimal?
    + InsuranceClaimNumber: string
    + Notes: string
    --
    + AssignProvider(providerId): void
    + UpdateStatus(status): void
    + RecordTemporaryFix(solution): void
    + Resolve(cost, notes): void
    + CalculateResponseTime(): TimeSpan
}

enum EmergencyType <<Enumeration>> ENUM_COLOR {
    PlumbingLeak
    BurstPipe
    PowerOutage
    HVACFailure
    RoofLeak
    GasLeak
    StructuralDamage
    FloodingBasement
    NoHeat
    NoAC
    SewerBackup
    Other
}

enum EmergencySeverity <<Enumeration>> ENUM_COLOR {
    Critical
    Urgent
    Moderate
    Low
}

enum RepairStatus <<Enumeration>> ENUM_COLOR {
    Reported
    Contacted
    ProviderEnRoute
    TemporaryFix
    InProgress
    Resolved
    InsuranceClaim
}

class ReportEmergencyCommand <<Command>> {
    + Title: string
    + Description: string
    + Type: EmergencyType
    + Severity: EmergencySeverity
    + PropertyId: Guid
    + PhotoUrls: List<string>
    + VideoUrls: List<string>
}

class AssignProviderCommand <<Command>> {
    + EmergencyId: Guid
    + ProviderId: Guid
}

class ResolveEmergencyCommand <<Command>> {
    + EmergencyId: Guid
    + ActualCost: decimal
    + Notes: string
}

interface IEmergencyRepairRepository <<Repository>> {
    + GetByIdAsync(id): EmergencyRepair
    + GetActiveAsync(propertyId): List<EmergencyRepair>
    + CreateAsync(emergency): EmergencyRepair
    + UpdateAsync(emergency): void
}

class EmergencyNotificationService <<Service>> {
    + SendEmergencyAlert(emergency): void
    + NotifyProviders(emergency): void
    + SendStatusUpdate(emergency): void
}

EmergencyRepair --> EmergencyType : has
EmergencyRepair --> EmergencySeverity : has
EmergencyRepair --> RepairStatus : has

@enduml
