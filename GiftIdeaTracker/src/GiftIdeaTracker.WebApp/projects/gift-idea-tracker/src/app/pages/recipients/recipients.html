<div class="page-container">
  <div class="recipients__header">
    <h1 class="page-title">Recipients</h1>
    <button mat-raised-button color="primary" (click)="onAddRecipient()">
      <mat-icon>add</mat-icon>
      Add Recipient
    </button>
  </div>

  @if (viewModel$ | async; as vm) {
    @if (vm.recipients.length > 0) {
      <div class="card-grid">
        @for (recipient of vm.recipients; track recipient.recipientId) {
          <app-recipient-card
            [recipient]="recipient"
            [giftIdeasCount]="getIdeasCount(recipient.recipientId, vm.ideasCountByRecipient)"
            (viewIdeasClick)="onViewIdeas($event)"
            (editClick)="onEditRecipient($event)"
            (deleteClick)="onDeleteRecipient($event)">
          </app-recipient-card>
        }
      </div>
    } @else {
      <div class="recipients__empty">
        <mat-icon>people_outline</mat-icon>
        <p>No recipients yet. Add someone to start tracking gift ideas!</p>
        <button mat-raised-button color="primary" (click)="onAddRecipient()">
          <mat-icon>add</mat-icon>
          Add Your First Recipient
        </button>
      </div>
    }
  }
</div>
