@startuml SleepQualityTracker_UseCaseDiagram

left to right direction

actor "User" as User
actor "Wearable Device" as Device
actor "System Scheduler" as Scheduler

rectangle "Sleep Quality Tracker System" {

  package "Sleep Session Management" {
    usecase "Log Sleep Session" as UC1
    usecase "Sync from Device" as UC2
    usecase "Add Sleep Stages" as UC3
    usecase "Log Sleep Interruption" as UC4
    usecase "View Sleep History" as UC5
    usecase "Edit Sleep Session" as UC6
  }

  package "Sleep Goals" {
    usecase "Set Sleep Goal" as UC7
    usecase "View Goal Progress" as UC8
    usecase "Track Streak" as UC9
    usecase "Receive Bedtime Reminder" as UC10
  }

  package "Sleep Quality Analysis" {
    usecase "View Quality Score" as UC11
    usecase "View Quality Trends" as UC12
    usecase "Get Quality Insights" as UC13
  }

  package "Sleep Debt Management" {
    usecase "View Sleep Debt" as UC14
    usecase "Track Debt History" as UC15
    usecase "Get Recovery Recommendations" as UC16
  }

  package "Habit Tracking" {
    usecase "Log Daily Habit" as UC17
    usecase "View Habit Correlations" as UC18
    usecase "Optimize Caffeine Timing" as UC19
    usecase "Optimize Exercise Timing" as UC20
  }

  package "Environment Optimization" {
    usecase "Log Sleep Environment" as UC21
    usecase "View Optimal Conditions" as UC22
    usecase "Receive Environment Alerts" as UC23
    usecase "Connect Smart Devices" as UC24
  }

  package "Pattern Detection" {
    usecase "View Detected Patterns" as UC25
    usecase "Analyze Weekday/Weekend Variance" as UC26
    usecase "Monitor Insomnia Indicators" as UC27
  }

  package "Recovery Tracking" {
    usecase "View Recovery Score" as UC28
    usecase "Get Training Recommendations" as UC29
    usecase "Track HRV and Heart Rate" as UC30
  }

  package "Dream Journaling" {
    usecase "Log Dream" as UC31
    usecase "View Dream Journal" as UC32
    usecase "Identify Dream Patterns" as UC33
    usecase "Log Nightmare" as UC34
  }

  package "Nap Tracking" {
    usecase "Log Nap" as UC35
    usecase "View Nap Impact" as UC36
    usecase "Receive Napping Alerts" as UC37
  }

  package "Reporting & Insights" {
    usecase "Generate Weekly Report" as UC38
    usecase "View Personalized Insights" as UC39
    usecase "Export Sleep Data" as UC40
    usecase "View Dashboard" as UC41
  }
}

' User relationships
User --> UC1
User --> UC2
User --> UC3
User --> UC4
User --> UC5
User --> UC6
User --> UC7
User --> UC8
User --> UC9
User --> UC10
User --> UC11
User --> UC12
User --> UC13
User --> UC14
User --> UC15
User --> UC16
User --> UC17
User --> UC18
User --> UC19
User --> UC20
User --> UC21
User --> UC22
User --> UC23
User --> UC24
User --> UC25
User --> UC26
User --> UC27
User --> UC28
User --> UC29
User --> UC30
User --> UC31
User --> UC32
User --> UC33
User --> UC34
User --> UC35
User --> UC36
User --> UC37
User --> UC38
User --> UC39
User --> UC40
User --> UC41

' Device relationships
Device --> UC2
Device --> UC3
Device --> UC30
Device --> UC21

' Scheduler relationships
Scheduler --> UC10
Scheduler --> UC38
Scheduler --> UC39
Scheduler --> UC23

' Include relationships
UC2 ..> UC1 : <<include>>
UC11 ..> UC5 : <<include>>
UC12 ..> UC11 : <<include>>
UC18 ..> UC17 : <<include>>
UC38 ..> UC12 : <<include>>
UC41 ..> UC11 : <<include>>
UC41 ..> UC8 : <<include>>

' Extend relationships
UC4 ..> UC1 : <<extend>>
UC3 ..> UC1 : <<extend>>
UC34 ..> UC31 : <<extend>>
UC37 ..> UC35 : <<extend>>

note right of UC2
  Automatically syncs sleep data
  from connected wearable devices
end note

note right of UC38
  Generated every Monday
  by system scheduler
end note

note right of UC18
  Requires minimum 14 days
  of habit and sleep data
end note

@enduml
