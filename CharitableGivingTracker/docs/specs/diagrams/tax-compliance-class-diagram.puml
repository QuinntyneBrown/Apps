@startuml Tax Compliance Class Diagram

class TaxDeduction <<Aggregate Root>> {
  - taxDeductionId: Guid
  - userId: Guid
  - taxYear: int
  - totalDeductibleAmount: decimal
  - donationCount: int
  - organizationsCount: int
  - calculatedAt: DateTime
  --
  + Calculate(): void
  - RaiseTaxDeductionCalculated(): void
}

class CalculateTaxDeductionCommand {
  + UserId: Guid
  + TenantId: Guid
  + TaxYear: int
}

class GenerateForm8283Command {
  + UserId: Guid
  + TenantId: Guid
  + TaxYear: int
}

class TaxDeductionCalculated <<Domain Event>> {
  + TaxYear: int
  + TotalDeductibleAmount: decimal
  + DonationCount: int
  + OccurredAt: DateTime
}

interface ITaxDeductionRepository {
  + GetByTaxYear(userId, year): TaxDeduction
  + CalculateDeductions(userId, year): decimal
}

@enduml
