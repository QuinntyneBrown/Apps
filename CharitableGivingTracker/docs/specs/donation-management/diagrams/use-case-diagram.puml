@startuml Donation Management Use Case Diagram

left to right direction
skinparam packageStyle rectangle

actor "Donor" as User
actor "Background Job" as System
actor "Payment Processor" as Payment

rectangle "Donation Management" {
  usecase "Record One-Time Donation" as UC1
  usecase "Record Non-Cash Donation" as UC2
  usecase "Schedule Recurring Donation" as UC3
  usecase "View Donation History" as UC4
  usecase "View Donation Details" as UC5
  usecase "Upload Acknowledgment Letter" as UC6
  usecase "Request Donation Refund" as UC7
  usecase "Modify Recurring Donation" as UC8
  usecase "Pause Recurring Donation" as UC9
  usecase "Cancel Recurring Donation" as UC10
  usecase "Execute Recurring Donation" as UC11
  usecase "Download Tax Receipt" as UC12
  usecase "Export Donation History" as UC13
  usecase "Search Donations" as UC14
  usecase "Filter Donations by Tax Year" as UC15
  usecase "View Missing Acknowledgments" as UC16
  usecase "Calculate Tax Deduction" as UC17
  usecase "Validate Organization" as UC18
}

' User interactions
User --> UC1
User --> UC2
User --> UC3
User --> UC4
User --> UC5
User --> UC6
User --> UC7
User --> UC8
User --> UC9
User --> UC10
User --> UC12
User --> UC13
User --> UC14
User --> UC15
User --> UC16

' System interactions
System --> UC11

' Payment processor interaction
UC11 ..> Payment: processes payment

' Include relationships
UC1 ..> UC18: <<include>>
UC2 ..> UC18: <<include>>
UC3 ..> UC18: <<include>>
UC1 ..> UC17: <<include>>
UC2 ..> UC17: <<include>>
UC7 ..> UC17: <<include>>

' Extend relationships
UC1 ..> UC6: <<extend>>\nif amount >= $250
UC5 ..> UC6: <<extend>>
UC5 ..> UC7: <<extend>>
UC3 ..> UC11: <<extend>>\non schedule
UC4 ..> UC14: <<extend>>
UC4 ..> UC15: <<extend>>
UC4 ..> UC13: <<extend>>

note right of UC1
  Records cash, check, credit card,
  or online donation with tax
  deductibility determination
end note

note right of UC2
  Records stock, property, or
  goods donation with fair
  market value assessment
end note

note right of UC3
  Sets up automated recurring
  donations on weekly, monthly,
  quarterly, or annual basis
end note

note right of UC11
  System automatically executes
  scheduled recurring donations
  and creates donation records
end note

note right of UC6
  Required for donations >= $250
  to maintain tax deductibility
end note

note right of UC17
  Validates 501(c)(3) status and
  calculates tax deduction amount
end note

@enduml
