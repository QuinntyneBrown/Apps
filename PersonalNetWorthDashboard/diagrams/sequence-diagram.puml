@startuml PersonalNetWorthDashboard_SequenceDiagram

title Net Worth Calculation Flow

actor User
participant UI
participant API
participant NetWorthService
participant AssetService
participant LiabilityService
participant EventBus
participant DB

== Add Asset ==
User -> UI: Add bank account ($50,000)
UI -> API: POST /api/assets
API -> AssetService: CreateAsset(assetDTO)
AssetService -> DB: Insert Asset
AssetService -> EventBus: Publish AssetAddedEvent
EventBus --> NetWorthService: AssetAddedEvent
NetWorthService -> NetWorthService: RecalculateNetWorth()
NetWorthService -> DB: Query all assets and liabilities
DB --> NetWorthService: Assets + Liabilities
NetWorthService -> NetWorthService: Calculate:\nNetWorth = TotalAssets - TotalLiabilities
NetWorthService -> DB: Insert NetWorth record
NetWorthService -> NetWorthService: CheckMilestone()
alt Milestone Reached
  NetWorthService -> EventBus: Publish NetWorthMilestoneReachedEvent
end
AssetService --> API: AssetDTO
API --> UI: 201 Created
UI --> User: Asset added

== View Dashboard ==
User -> UI: Open dashboard
UI -> API: GET /api/net-worth
API -> NetWorthService: GetCurrentNetWorth()
NetWorthService -> DB: Query latest NetWorth
DB --> NetWorthService: NetWorthDTO
NetWorthService --> API: NetWorthDTO
API --> UI: Net Worth data
UI --> User: Display:\nAssets: $250,000\nLiabilities: $150,000\nNet Worth: $100,000

@enduml
