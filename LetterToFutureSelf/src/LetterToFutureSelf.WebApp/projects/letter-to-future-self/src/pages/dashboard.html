<div class="dashboard">
  <div class="dashboard__header">
    <h1 class="dashboard__title">Dashboard</h1>
    <p class="dashboard__subtitle">Overview of your letters to future self</p>
  </div>

  <div *ngIf="loading$ | async" class="dashboard__loading">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="!(loading$ | async)" class="dashboard__content">
    <div class="dashboard__cards">
      <mat-card class="dashboard__card dashboard__card--primary">
        <mat-card-header>
          <mat-icon class="dashboard__card-icon">mail</mat-icon>
          <mat-card-title>Total Letters</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__card-value">{{ (letters$ | async)?.length || 0 }}</div>
          <div class="dashboard__card-label">Letters written</div>
        </mat-card-content>
        <mat-card-actions>
          <a mat-button color="primary" routerLink="/letters">View All</a>
          <a mat-button color="primary" routerLink="/letters/new">Create New</a>
        </mat-card-actions>
      </mat-card>

      <mat-card class="dashboard__card dashboard__card--warning">
        <mat-card-header>
          <mat-icon class="dashboard__card-icon">schedule</mat-icon>
          <mat-card-title>Pending Delivery</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__card-value">{{ getPendingLettersCount(letters$ | async) }}</div>
          <div class="dashboard__card-label">Awaiting delivery</div>
        </mat-card-content>
        <mat-card-actions>
          <a mat-button color="primary" routerLink="/letters">View Letters</a>
        </mat-card-actions>
      </mat-card>

      <mat-card class="dashboard__card dashboard__card--accent">
        <mat-card-header>
          <mat-icon class="dashboard__card-icon">notifications_active</mat-icon>
          <mat-card-title>Due for Delivery</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__card-value">{{ getDueForDeliveryCount(letters$ | async) }}</div>
          <div class="dashboard__card-label">Ready to deliver</div>
        </mat-card-content>
        <mat-card-actions>
          <a mat-button color="primary" routerLink="/letters">View Letters</a>
        </mat-card-actions>
      </mat-card>

      <mat-card class="dashboard__card dashboard__card--success">
        <mat-card-header>
          <mat-icon class="dashboard__card-icon">done_all</mat-icon>
          <mat-card-title>Delivered</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__card-value">{{ getDeliveredLettersCount(letters$ | async) }}</div>
          <div class="dashboard__card-label">Letters delivered</div>
        </mat-card-content>
        <mat-card-actions>
          <a mat-button color="primary" routerLink="/letters">View Letters</a>
        </mat-card-actions>
      </mat-card>

      <mat-card class="dashboard__card dashboard__card--info">
        <mat-card-header>
          <mat-icon class="dashboard__card-icon">mark_email_unread</mat-icon>
          <mat-card-title>Unread</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__card-value">{{ getUnreadLettersCount(letters$ | async) }}</div>
          <div class="dashboard__card-label">Unread letters</div>
        </mat-card-content>
        <mat-card-actions>
          <a mat-button color="primary" routerLink="/letters">Read Letters</a>
        </mat-card-actions>
      </mat-card>

      <mat-card class="dashboard__card dashboard__card--secondary">
        <mat-card-header>
          <mat-icon class="dashboard__card-icon">event</mat-icon>
          <mat-card-title>Active Schedules</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__card-value">{{ getActiveSchedulesCount(deliverySchedules$ | async) }}</div>
          <div class="dashboard__card-label">Delivery schedules</div>
        </mat-card-content>
        <mat-card-actions>
          <a mat-button color="primary" routerLink="/delivery-schedules">View All</a>
          <a mat-button color="primary" routerLink="/delivery-schedules/new">Create New</a>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>
