@startuml

title BBQ Grilling Recipe Book - Cook Log Flow

actor User
participant "Recipe Detail" as RecipeDetail
participant "Cook Log" as CookLog
participant "Cook Log Service" as CookLogService
participant "Cook Log Controller" as CookLogAPI
participant "Database" as DB

== Start Cooking Session ==
User -> RecipeDetail: View recipe
activate RecipeDetail
RecipeDetail --> User: Display recipe with "Start Cooking" button
User -> RecipeDetail: Click "Start Cooking"
RecipeDetail -> CookLog: Open cook log interface
activate CookLog
CookLog -> CookLog: Initialize cooking session
CookLog -> CookLogService: createCookLog(recipeId)
activate CookLogService
CookLogService -> CookLogAPI: POST /api/cook-logs
activate CookLogAPI
CookLogAPI -> CookLogAPI: Validate request data
CookLogAPI -> DB: Insert new cook log record
activate DB
note right of DB
Cook Log includes:
- Recipe ID
- Start Time
- User ID
- Tenant ID
- Initial Status: In Progress
end note
DB --> CookLogAPI: Return created cook log
deactivate DB
CookLogAPI --> CookLogService: 201 Created with cook log
deactivate CookLogAPI
CookLogService --> CookLog: Cook log created
deactivate CookLogService
CookLog --> User: Display active cooking session
deactivate RecipeDetail

== Log Cooking Notes ==
User -> CookLog: Add cooking notes
activate CookLog
User -> CookLog: Record temperature reading
User -> CookLog: Log time checkpoint
User -> CookLog: Add photos
User -> CookLog: Click "Save Notes"
CookLog -> CookLogService: updateCookLog(cookLogId, notes)
activate CookLogService
CookLogService -> CookLogAPI: PUT /api/cook-logs/{cookLogId}
activate CookLogAPI
CookLogAPI -> DB: Update cook log with notes
activate DB
DB --> CookLogAPI: Return updated cook log
deactivate DB
CookLogAPI --> CookLogService: 200 OK with cook log
deactivate CookLogAPI
CookLogService --> CookLog: Notes saved successfully
deactivate CookLogService
CookLog --> User: Display updated cook log
deactivate CookLog

== Complete Cooking Session ==
User -> CookLog: Review cooking session
activate CookLog
User -> CookLog: Add final notes and rating
User -> CookLog: Click "Complete Session"
CookLog -> CookLogService: completeCookLog(cookLogId, finalData)
activate CookLogService
CookLogService -> CookLogAPI: PUT /api/cook-logs/{cookLogId}/complete
activate CookLogAPI
CookLogAPI -> DB: Update cook log status to completed
activate DB
note right of DB
Final cook log data:
- End Time
- Total Duration
- Final Temperature
- Rating
- Photos
- Notes
end note
DB --> CookLogAPI: Return completed cook log
deactivate DB
CookLogAPI --> CookLogService: 200 OK with cook log
deactivate CookLogAPI
CookLogService --> CookLog: Session completed
deactivate CookLogService
CookLog -> CookLog: Show completion summary
CookLog --> User: Display cooking summary
deactivate CookLog

== View Cook Log History ==
User -> CookLog: Navigate to cook log history
activate CookLog
CookLog -> CookLogService: getCookLogs(filters)
activate CookLogService
CookLogService -> CookLogAPI: GET /api/cook-logs
activate CookLogAPI
CookLogAPI -> DB: Query cook logs for user
activate DB
DB --> CookLogAPI: Return cook log list
deactivate DB
CookLogAPI --> CookLogService: 200 OK with cook logs
deactivate CookLogAPI
CookLogService --> CookLog: Cook log history data
deactivate CookLogService
CookLog --> User: Display cook log history
deactivate CookLog

== View Cook Log Details ==
User -> CookLog: Click on past cook log
activate CookLog
CookLog -> CookLogService: getCookLogById(cookLogId)
activate CookLogService
CookLogService -> CookLogAPI: GET /api/cook-logs/{cookLogId}
activate CookLogAPI
CookLogAPI -> DB: Query cook log details
activate DB
DB --> CookLogAPI: Return cook log with all data
deactivate DB
CookLogAPI --> CookLogService: 200 OK with cook log
deactivate CookLogAPI
CookLogService --> CookLog: Cook log detail data
deactivate CookLogService
CookLog --> User: Display complete cook log details
note right of User
View details including:
- Recipe used
- Timestamps
- Temperature logs
- Photos
- Notes
- Rating
end note
deactivate CookLog

@enduml
