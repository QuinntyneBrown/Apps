<div class="favorites">
  <div class="favorites__container">
    <header class="favorites__header">
      <h1 class="favorites__title">My Favorites</h1>
      <p class="favorites__subtitle">Your saved conversation prompts</p>
    </header>

    <section class="favorites__list">
      <mat-card class="favorites__card" *ngFor="let favorite of favorites$ | async">
        <mat-card-header>
          <mat-card-title class="favorites__card-title">
            {{ favorite.prompt?.text || 'Prompt not found' }}
          </mat-card-title>
          <mat-card-subtitle *ngIf="favorite.createdAt">
            Added {{ favorite.createdAt | date: 'mediumDate' }}
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="favorites__card-meta" *ngIf="favorite.prompt">
            <mat-chip-set>
              <mat-chip>{{ categoryLabels[favorite.prompt.category] }}</mat-chip>
              <mat-chip>{{ depthLabels[favorite.prompt.depth] }}</mat-chip>
              <mat-chip *ngIf="favorite.prompt.usageCount > 0">
                Used {{ favorite.prompt.usageCount }} times
              </mat-chip>
            </mat-chip-set>
          </div>
          <p *ngIf="favorite.notes" class="favorites__card-notes">
            <strong>Notes:</strong> {{ favorite.notes }}
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" (click)="usePrompt(favorite)">
            <mat-icon>check_circle</mat-icon>
            Use
          </button>
          <button mat-button color="warn" (click)="removeFavorite(favorite)">
            <mat-icon>delete</mat-icon>
            Remove
          </button>
        </mat-card-actions>
      </mat-card>

      <mat-card class="favorites__empty" *ngIf="(favorites$ | async)?.length === 0">
        <mat-card-content>
          <mat-icon class="favorites__empty-icon">favorite_border</mat-icon>
          <p>No favorites yet. Start adding prompts to your favorites!</p>
          <button mat-raised-button color="primary" routerLink="/prompts">
            Browse Prompts
          </button>
        </mat-card-content>
      </mat-card>
    </section>
  </div>
</div>
