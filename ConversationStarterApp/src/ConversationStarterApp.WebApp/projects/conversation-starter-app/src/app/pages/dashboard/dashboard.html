<div class="dashboard">
  <div class="dashboard__container">
    <header class="dashboard__header">
      <h1 class="dashboard__title">Welcome to Conversation Starter</h1>
      <p class="dashboard__subtitle">Get inspiring prompts to spark meaningful conversations</p>
    </header>

    <section class="dashboard__section">
      <div class="dashboard__section-header">
        <h2 class="dashboard__section-title">Random Prompt</h2>
        <button mat-raised-button color="accent" (click)="loadRandomPrompt()">
          <mat-icon>refresh</mat-icon>
          Get New Prompt
        </button>
      </div>

      <mat-card class="dashboard__prompt-card" *ngIf="randomPrompt$ | async as prompt">
        <mat-card-header>
          <mat-card-title>{{ prompt.text }}</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__prompt-meta">
            <mat-chip-set>
              <mat-chip>{{ categoryLabels[prompt.category] }}</mat-chip>
              <mat-chip>{{ depthLabels[prompt.depth] }}</mat-chip>
              <mat-chip *ngIf="prompt.usageCount > 0">Used {{ prompt.usageCount }} times</mat-chip>
            </mat-chip-set>
          </div>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" (click)="usePrompt(prompt)">
            <mat-icon>check_circle</mat-icon>
            Mark as Used
          </button>
          <button mat-button (click)="navigateToPrompts()">
            View All Prompts
          </button>
        </mat-card-actions>
      </mat-card>

      <mat-card class="dashboard__empty" *ngIf="!(randomPrompt$ | async)">
        <mat-card-content>
          <mat-icon class="dashboard__empty-icon">lightbulb_outline</mat-icon>
          <p>No prompts available yet. Add some prompts to get started!</p>
          <button mat-raised-button color="primary" (click)="navigateToPrompts()">
            Browse Prompts
          </button>
        </mat-card-content>
      </mat-card>
    </section>

    <section class="dashboard__section">
      <div class="dashboard__section-header">
        <h2 class="dashboard__section-title">Recent Sessions</h2>
        <button mat-button color="primary" (click)="navigateToSessions()">
          View All
        </button>
      </div>

      <div class="dashboard__sessions">
        <mat-card class="dashboard__session-card" *ngFor="let session of recentSessions$ | async">
          <mat-card-header>
            <mat-card-title>{{ session.title }}</mat-card-title>
            <mat-card-subtitle>
              {{ session.startTime | date: 'short' }}
              <span *ngIf="session.duration"> - {{ session.duration }}</span>
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p *ngIf="session.participants">Participants: {{ session.participants }}</p>
            <p *ngIf="session.notes" class="dashboard__session-notes">{{ session.notes }}</p>
          </mat-card-content>
        </mat-card>

        <mat-card class="dashboard__empty" *ngIf="(recentSessions$ | async)?.length === 0">
          <mat-card-content>
            <mat-icon class="dashboard__empty-icon">event_note</mat-icon>
            <p>No sessions yet. Start a new session to track your conversations!</p>
            <button mat-raised-button color="primary" (click)="navigateToSessions()">
              Create Session
            </button>
          </mat-card-content>
        </mat-card>
      </div>
    </section>
  </div>
</div>
