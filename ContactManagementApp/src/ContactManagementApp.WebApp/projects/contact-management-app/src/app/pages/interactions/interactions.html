<div class="interactions">
  <div class="interactions__header">
    <h1 class="interactions__title">Interactions</h1>
  </div>

  <div class="interactions__content" *ngIf="!(loading$ | async); else loadingTemplate">
    <div class="interactions__list" *ngIf="(interactions$ | async) as interactions">
      <div *ngIf="interactions.length === 0" class="interactions__empty">
        <mat-icon class="interactions__empty-icon">forum</mat-icon>
        <p class="interactions__empty-text">No interactions recorded yet</p>
      </div>

      <mat-card *ngFor="let interaction of interactions" class="interactions__card">
        <mat-card-header>
          <mat-card-title>{{ interaction.interactionType }}</mat-card-title>
          <mat-card-subtitle>{{ interaction.interactionDate | date }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p *ngIf="interaction.subject"><strong>Subject:</strong> {{ interaction.subject }}</p>
          <p *ngIf="interaction.notes"><strong>Notes:</strong> {{ interaction.notes }}</p>
          <p *ngIf="interaction.outcome"><strong>Outcome:</strong> {{ interaction.outcome }}</p>
          <p *ngIf="interaction.durationMinutes"><strong>Duration:</strong> {{ interaction.durationMinutes }} minutes</p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <ng-template #loadingTemplate>
    <div class="interactions__loading">
      <mat-spinner></mat-spinner>
    </div>
  </ng-template>
</div>
