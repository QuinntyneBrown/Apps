<div class="dashboard">
  <h1 class="dashboard__title">Upcoming Celebrations</h1>

  <ng-container *ngIf="viewModel$ | async as vm">
    <div class="dashboard__grid" *ngIf="vm.upcomingDates.length > 0; else emptyState">
      <mat-card *ngFor="let date of vm.upcomingDates" class="dashboard__card">
        <mat-card-header>
          <mat-icon mat-card-avatar class="dashboard__card-icon">{{ date.icon }}</mat-icon>
          <mat-card-title>{{ date.personName }}</mat-card-title>
          <mat-card-subtitle>
            {{ getDaysLabel(date.daysUntil) }} - {{ date.formattedDate }}
          </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <mat-chip-set>
            <mat-chip>{{ date.dateType }}</mat-chip>
            <mat-chip *ngIf="date.relationship">{{ date.relationship }}</mat-chip>
          </mat-chip-set>
          <p *ngIf="date.notes" class="dashboard__card-notes">{{ date.notes }}</p>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" [routerLink]="['/reminders', date.dateId]">
            <mat-icon>notifications</mat-icon>
            Set Reminder
          </button>
          <button mat-button color="primary" [routerLink]="['/gifts', date.dateId]">
            <mat-icon>card_giftcard</mat-icon>
            Plan Gift
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <ng-template #emptyState>
      <div class="dashboard__empty">
        <mat-icon class="dashboard__empty-icon">event</mat-icon>
        <h2>No upcoming celebrations</h2>
        <p>Add important dates to start tracking birthdays, anniversaries, and special occasions.</p>
        <button mat-raised-button color="primary" routerLink="/dates/new">
          <mat-icon>add</mat-icon>
          Add Date
        </button>
      </div>
    </ng-template>
  </ng-container>
</div>
