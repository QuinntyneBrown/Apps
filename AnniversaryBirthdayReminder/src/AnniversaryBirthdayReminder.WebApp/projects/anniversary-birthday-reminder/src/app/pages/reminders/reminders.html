<div class="reminders">
  <h1 class="reminders__title">Reminder Settings</h1>

  <ng-container *ngIf="viewModel$ | async as vm">
    <mat-card class="reminders__card">
      <mat-card-header>
        <mat-icon mat-card-avatar>schedule</mat-icon>
        <mat-card-title>Notification Timing</mat-card-title>
        <mat-card-subtitle>When should we remind you?</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-list>
          <mat-list-item>
            <mat-checkbox
              [checked]="vm.settings.oneWeekBefore"
              (change)="updateOneWeekBefore(vm.settings, $event.checked)">
              1 week before
            </mat-checkbox>
          </mat-list-item>
          <mat-list-item>
            <mat-checkbox
              [checked]="vm.settings.threeDaysBefore"
              (change)="updateThreeDaysBefore(vm.settings, $event.checked)">
              3 days before
            </mat-checkbox>
          </mat-list-item>
          <mat-list-item>
            <mat-checkbox
              [checked]="vm.settings.oneDayBefore"
              (change)="updateOneDayBefore(vm.settings, $event.checked)">
              1 day before
            </mat-checkbox>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>

    <mat-card class="reminders__card">
      <mat-card-header>
        <mat-icon mat-card-avatar>notifications</mat-icon>
        <mat-card-title>Notification Channels</mat-card-title>
        <mat-card-subtitle>How should we notify you?</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-list>
          <mat-list-item>
            <mat-checkbox
              [checked]="hasChannel(vm.settings, DeliveryChannel.Email)"
              (change)="toggleChannel(vm.settings, DeliveryChannel.Email)">
              <mat-icon class="reminders__channel-icon">email</mat-icon>
              Email
            </mat-checkbox>
          </mat-list-item>
          <mat-list-item>
            <mat-checkbox
              [checked]="hasChannel(vm.settings, DeliveryChannel.Push)"
              (change)="toggleChannel(vm.settings, DeliveryChannel.Push)">
              <mat-icon class="reminders__channel-icon">notifications_active</mat-icon>
              Push Notifications
            </mat-checkbox>
          </mat-list-item>
          <mat-list-item>
            <mat-checkbox
              [checked]="hasChannel(vm.settings, DeliveryChannel.SMS)"
              (change)="toggleChannel(vm.settings, DeliveryChannel.SMS)">
              <mat-icon class="reminders__channel-icon">sms</mat-icon>
              SMS
            </mat-checkbox>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>

    <div class="reminders__actions">
      <button mat-raised-button color="primary" (click)="saveSettings(vm.settings)">
        <mat-icon>save</mat-icon>
        Save Settings
      </button>
    </div>
  </ng-container>
</div>
