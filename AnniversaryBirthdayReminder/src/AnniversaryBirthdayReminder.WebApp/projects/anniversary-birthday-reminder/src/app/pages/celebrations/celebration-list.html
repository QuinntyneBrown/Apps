<div class="celebration-list">
  <h1 class="celebration-list__title">Celebration History</h1>

  <ng-container *ngIf="viewModel$ | async as vm">
    <div class="celebration-list__stats" *ngIf="vm.celebrations.length > 0">
      <mat-card class="celebration-list__stat-card">
        <mat-card-content>
          <div class="celebration-list__stat-value">{{ vm.completedCount }}</div>
          <div class="celebration-list__stat-label">Celebrated</div>
        </mat-card-content>
      </mat-card>
      <mat-card class="celebration-list__stat-card">
        <mat-card-content>
          <div class="celebration-list__stat-value">{{ vm.skippedCount }}</div>
          <div class="celebration-list__stat-label">Skipped</div>
        </mat-card-content>
      </mat-card>
    </div>

    <div class="celebration-list__timeline" *ngIf="vm.celebrations.length > 0; else emptyState">
      <mat-card *ngFor="let celebration of vm.celebrations" class="celebration-list__card">
        <mat-card-header>
          <mat-icon mat-card-avatar [color]="getStatusColor(celebration.status)">
            {{ getStatusIcon(celebration.status) }}
          </mat-icon>
          <mat-card-title>{{ celebration.year }}</mat-card-title>
          <mat-card-subtitle>{{ celebration.formattedDate }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="celebration-list__rating" *ngIf="celebration.status === CelebrationStatus.Completed">
            <span class="celebration-list__stars">{{ celebration.stars }}</span>
          </div>
          <p *ngIf="celebration.notes" class="celebration-list__notes">{{ celebration.notes }}</p>
          <div class="celebration-list__photos" *ngIf="celebration.photos?.length">
            <span class="celebration-list__photo-count">
              <mat-icon>photo_library</mat-icon>
              {{ celebration.photos.length }} photos
            </span>
          </div>
          <div class="celebration-list__attendees" *ngIf="celebration.attendees?.length">
            <span class="celebration-list__attendee-count">
              <mat-icon>people</mat-icon>
              {{ celebration.attendees.length }} attendees
            </span>
          </div>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary" (click)="openDetails(celebration.celebrationId)">
            <mat-icon>visibility</mat-icon>
            View Details
          </button>
        </mat-card-actions>
      </mat-card>
    </div>

    <ng-template #emptyState>
      <div class="celebration-list__empty">
        <mat-icon class="celebration-list__empty-icon">celebration</mat-icon>
        <h2>No celebrations recorded yet</h2>
        <p>Your celebration history will appear here after you mark occasions as celebrated.</p>
      </div>
    </ng-template>
  </ng-container>
</div>
