@startuml Income Stream Management Use Case Diagram

!define ACTOR_COLOR #C8E6C9
!define USECASE_COLOR #E1F5FE
!define SYSTEM_COLOR #FFF9C4

left to right direction

actor "Freelancer/\nEntrepreneur" as User ACTOR_COLOR
actor "Dashboard\nService" as Dashboard ACTOR_COLOR
actor "Analytics\nService" as Analytics ACTOR_COLOR
actor "Tax\nService" as Tax ACTOR_COLOR

rectangle "Income Stream Management System" SYSTEM_COLOR {

    package "Core Management" {
        usecase "Create Income Stream" as UC1 USECASE_COLOR
        usecase "View Active Streams" as UC2 USECASE_COLOR
        usecase "View Stream Details" as UC3 USECASE_COLOR
        usecase "Update Stream Info" as UC4 USECASE_COLOR
        usecase "Close Income Stream" as UC5 USECASE_COLOR
        usecase "View Stream History" as UC6 USECASE_COLOR
        usecase "Reactivate Stream" as UC7 USECASE_COLOR
    }

    package "Analysis & Reporting" {
        usecase "View Summary Stats" as UC8 USECASE_COLOR
        usecase "Calculate Actual Revenue" as UC9 USECASE_COLOR
        usecase "Track Stream Performance" as UC10 USECASE_COLOR
        usecase "Compare Streams" as UC11 USECASE_COLOR
        usecase "Export Stream Data" as UC12 USECASE_COLOR
    }

    package "Organization" {
        usecase "Filter Streams" as UC13 USECASE_COLOR
        usecase "Sort Streams" as UC14 USECASE_COLOR
        usecase "Search Streams" as UC15 USECASE_COLOR
        usecase "Tag Streams" as UC16 USECASE_COLOR
    }
}

' User relationships
User --> UC1 : creates
User --> UC2 : views
User --> UC3 : views details
User --> UC4 : updates
User --> UC5 : closes
User --> UC6 : views history
User --> UC7 : reactivates
User --> UC8 : views summary
User --> UC10 : tracks
User --> UC11 : compares
User --> UC12 : exports
User --> UC13 : filters
User --> UC14 : sorts
User --> UC15 : searches
User --> UC16 : tags

' Include relationships
UC2 ..> UC9 : <<include>>
UC3 ..> UC9 : <<include>>
UC8 ..> UC9 : <<include>>
UC10 ..> UC9 : <<include>>

UC2 ..> UC13 : <<include>>
UC2 ..> UC14 : <<include>>

' Extend relationships
UC5 ..> UC6 : <<extend>>
UC7 ..> UC2 : <<extend>>

' Service relationships
UC1 ..> Dashboard : notifies
UC5 ..> Dashboard : notifies
UC7 ..> Dashboard : notifies
UC5 ..> Tax : triggers P&L
UC1 ..> Analytics : tracks creation
UC5 ..> Analytics : tracks closure
UC7 ..> Analytics : tracks reactivation

note right of UC1
    New income stream added
    with business type, start
    date, and expected revenue
end note

note right of UC5
    Closing stream calculates
    total revenue and duration,
    records closure reason
end note

note right of UC7
    Reactivating returns stream
    to active status and clears
    end date
end note

note bottom of UC9
    Actual monthly revenue is
    calculated from recorded
    income transactions
end note

@enduml
