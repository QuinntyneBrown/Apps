<div class="dashboard">
  <h1 class="dashboard__title">Dashboard</h1>

  <div class="dashboard__stats">
    <mat-card class="dashboard__stat-card dashboard__stat-card--primary">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">business</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-value">{{ (activeBusinessesCount$ | async) || 0 }}</div>
        <div class="dashboard__stat-label">Active Businesses</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/businesses">View All</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__stat-card dashboard__stat-card--success">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">payments</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-value">{{ (totalIncome$ | async) || 0 | currency }}</div>
        <div class="dashboard__stat-label">Total Income</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/incomes">View Details</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__stat-card dashboard__stat-card--danger">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">receipt</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-value">{{ (totalExpenses$ | async) || 0 | currency }}</div>
        <div class="dashboard__stat-label">Total Expenses</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/expenses">View Details</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__stat-card dashboard__stat-card--info">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">trending_up</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-value"
             [class.dashboard__stat-value--positive]="((netProfit$ | async) || 0) > 0"
             [class.dashboard__stat-value--negative]="((netProfit$ | async) || 0) < 0">
          {{ (netProfit$ | async) || 0 | currency }}
        </div>
        <div class="dashboard__stat-label">Net Profit</div>
      </mat-card-content>
    </mat-card>
  </div>

  <div class="dashboard__alerts">
    <mat-card class="dashboard__alert-card" *ngIf="(unpaidIncomesCount$ | async)">
      <mat-card-header>
        <mat-icon color="warn" class="dashboard__alert-icon">warning</mat-icon>
        <mat-card-title>Pending Payments</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        You have {{ (unpaidIncomesCount$ | async) }} unpaid income entries.
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/incomes">Review</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__alert-card" *ngIf="(unpaidTaxesCount$ | async)">
      <mat-card-header>
        <mat-icon color="warn" class="dashboard__alert-icon">account_balance</mat-icon>
        <mat-card-title>Unpaid Tax Estimates</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        You have {{ (unpaidTaxesCount$ | async) }} unpaid tax estimates.
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/tax-estimates">Review</button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="dashboard__quick-actions">
    <h2 class="dashboard__section-title">Quick Actions</h2>
    <div class="dashboard__actions">
      <button mat-raised-button color="primary" routerLink="/businesses" class="dashboard__action-button">
        <mat-icon>add</mat-icon>
        Add Business
      </button>
      <button mat-raised-button color="primary" routerLink="/incomes" class="dashboard__action-button">
        <mat-icon>add</mat-icon>
        Record Income
      </button>
      <button mat-raised-button color="primary" routerLink="/expenses" class="dashboard__action-button">
        <mat-icon>add</mat-icon>
        Add Expense
      </button>
    </div>
  </div>
</div>
