<div class="recipes">
  <div class="recipes__header">
    <h1 class="recipes__title">Recipes</h1>
    <button mat-raised-button color="primary" (click)="openCreateDialog()">
      <mat-icon>add</mat-icon>
      Create Recipe
    </button>
  </div>

  <div class="recipes__filters">
    <mat-form-field class="recipes__filter">
      <mat-label>Cuisine</mat-label>
      <mat-select [formControl]="cuisineFilter">
        <mat-option [value]="null">All</mat-option>
        @for (cuisine of cuisines; track cuisine.value) {
          <mat-option [value]="cuisine.value">{{ cuisine.label }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field class="recipes__filter">
      <mat-label>Difficulty</mat-label>
      <mat-select [formControl]="difficultyFilter">
        <mat-option [value]="null">All</mat-option>
        @for (level of difficultyLevels; track level.value) {
          <mat-option [value]="level.value">{{ level.label }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field class="recipes__filter">
      <mat-label>Show</mat-label>
      <mat-select [formControl]="favoritesOnlyFilter">
        <mat-option [value]="false">All Recipes</mat-option>
        <mat-option [value]="true">Favorites Only</mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-button (click)="clearFilters()">Clear Filters</button>
  </div>

  @if (loading$ | async) {
    <div class="recipes__loading">
      <mat-spinner></mat-spinner>
    </div>
  } @else {
    @if (recipes$ | async; as recipes) {
      @if (recipes.length === 0) {
        <div class="recipes__empty">
          <mat-icon>restaurant_menu</mat-icon>
          <p>No recipes found. Create your first recipe!</p>
        </div>
      } @else {
        <div class="recipes__grid">
          @for (recipe of recipes; track recipe.recipeId) {
            <app-recipe-card
              [recipe]="recipe"
              (edit)="onEdit($event)"
              (delete)="onDelete($event)"
              (toggleFavorite)="onToggleFavorite($event)"
            ></app-recipe-card>
          }
        </div>
      }
    }
  }
</div>
