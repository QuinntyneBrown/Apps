@startuml Domain Model - Marriage Enrichment Journal

' Core entities
class User {
    +Id: Guid
    +Email: string
    +FirstName: string
    +LastName: string
    +CreatedAt: DateTime
    +LastLoginAt: DateTime
    --
    +GetPrivacySettings()
    +UpdateProfile()
}

class Couple {
    +Id: Guid
    +Partner1Id: Guid
    +Partner2Id: Guid
    +RelationshipStartDate: Date
    +CreatedAt: DateTime
    --
    +GetHealthScore()
    +GetMilestones()
}

' Gratitude domain
class GratitudeEntry {
    +Id: Guid
    +AuthorId: Guid
    +SpouseId: Guid
    +Content: string
    +Category: GratitudeCategory
    +PrivacyLevel: PrivacyLevel
    +CreatedAt: DateTime
    +SharedAt: DateTime?
    --
    +ShareWithSpouse()
    +Acknowledge()
}

enum GratitudeCategory {
    Action
    Quality
    Moment
}

class GratitudeAcknowledgment {
    +Id: Guid
    +EntryId: Guid
    +AcknowledgedBy: Guid
    +ResponseMessage: string
    +EmotionalReaction: EmotionalReaction
    +AcknowledgedAt: DateTime
}

class GratitudeStreak {
    +Id: Guid
    +UserId: Guid
    +CurrentStreak: int
    +LongestStreak: int
    +LastEntryDate: Date
    +TotalEntries: int
    --
    +UpdateStreak()
    +CheckMilestone()
}

' Appreciation domain
class Appreciation {
    +Id: Guid
    +ExpresserId: Guid
    +RecipientId: Guid
    +AppreciationType: AppreciationType
    +SpecificInstance: string
    +IntensityLevel: int
    +CreatedAt: DateTime
    --
    +Reciprocate()
}

enum AppreciationType {
    Words
    Actions
    Qualities
}

class LoveLanguageProfile {
    +Id: Guid
    +UserId: Guid
    +PrimaryLanguage: LoveLanguage
    +SecondaryLanguage: LoveLanguage
    +ConfidenceScore: decimal
    +LanguageBreakdown: Dictionary
    +LastAnalyzedAt: DateTime
    --
    +AnalyzePattern()
    +GetSuggestions()
}

enum LoveLanguage {
    WordsOfAffirmation
    QualityTime
    ReceivingGifts
    ActsOfService
    PhysicalTouch
}

' Reflection domain
class Reflection {
    +Id: Guid
    +AuthorId: Guid
    +CoAuthorId: Guid?
    +PromptId: Guid?
    +ReflectionContent: string
    +PrivacyLevel: PrivacyLevel
    +ReflectionType: ReflectionType
    +ConflictRelated: bool
    +CreatedAt: DateTime
    --
    +AddTheme()
    +ShareWithSpouse()
}

enum ReflectionType {
    Personal
    Conflict
    Growth
    WeeklyReview
}

class ReflectionPrompt {
    +Id: Guid
    +PromptText: string
    +Category: string
    +TargetAudience: string
    +DifficultyLevel: int
    +IsActive: bool
}

class WeeklyReview {
    +Id: Guid
    +ReflectionId: Guid
    +ReviewWeekStart: Date
    +ReviewWeekEnd: Date
    +Highlights: string
    +Challenges: string
    +GoalsForNextWeek: string
    +SatisfactionRating: int
    +CompletedAt: DateTime
}

' Communication domain
class ConversationPrompt {
    +Id: Guid
    +PromptText: string
    +Category: string
    +DifficultyLevel: int
    +UsageCount: int
}

class PromptResponse {
    +Id: Guid
    +PromptId: Guid
    +UserId: Guid
    +ResponseContent: string
    +SharedWithSpouse: bool
    +CreatedAt: DateTime
}

class JointJournal {
    +Id: Guid
    +Title: string
    +Content: string
    +Author1Id: Guid
    +Author2Id: Guid
    +StartedAt: DateTime
    +CompletedAt: DateTime?
    +CreationDuration: int?
    --
    +UpdateContent()
    +MarkComplete()
}

class CommunicationGoal {
    +Id: Guid
    +GoalDescription: string
    +TargetBehavior: string
    +SuccessCriteria: string
    +Timeline: string
    +SetById: Guid
    +PartnerId: Guid
    +SetAt: DateTime
    +IsActive: bool
    --
    +TrackProgress()
    +Complete()
}

class CommunicationWin {
    +Id: Guid
    +UserId: Guid
    +WhatHappened: string
    +SkillsUsed: string
    +Outcome: string
    +CelebrationNotes: string
    +RecordedAt: DateTime
}

' Health Monitoring domain
class MoodLog {
    +Id: Guid
    +UserId: Guid
    +MoodRating: int
    +ContributingFactors: List<string>
    +Notes: string
    +LoggedAt: DateTime
}

class MoodTrend {
    +Id: Guid
    +CoupleId: Guid
    +TrendDirection: TrendDirection
    +Duration: int
    +Severity: string
    +DetectedAt: DateTime
    +IsResolved: bool
}

enum TrendDirection {
    Upward
    Downward
    Stable
}

class PositivePattern {
    +Id: Guid
    +CoupleId: Guid
    +PatternType: string
    +Frequency: string
    +Examples: List<string>
    +BothPartnersContribution: bool
    +IdentifiedAt: DateTime
}

' Milestone domain
class Milestone {
    +Id: Guid
    +CoupleId: Guid
    +MilestoneType: MilestoneType
    +Date: Date
    +Title: string
    +Significance: string
    +CelebrationNotes: string
    +CreatedAt: DateTime
    --
    +AddPhoto()
    +ScheduleReminder()
}

enum MilestoneType {
    Anniversary
    Achievement
    SpecialEvent
    Custom
}

class MilestonePhoto {
    +Id: Guid
    +MilestoneId: Guid
    +PhotoUrl: string
    +Caption: string
    +UploadedAt: DateTime
}

' Privacy domain
enum PrivacyLevel {
    Private
    SpouseVisible
    Joint
}

class PrivacySettings {
    +Id: Guid
    +UserId: Guid
    +DefaultPrivacyLevel: PrivacyLevel
    +ContentTypeDefaults: Dictionary
    +ShareNotifications: bool
    +AuditLogEnabled: bool
    --
    +UpdateDefaults()
}

class AuditLog {
    +Id: Guid
    +UserId: Guid
    +ContentId: Guid
    +ContentType: string
    +Action: string
    +ActorId: Guid
    +Timestamp: DateTime
}

' Relationships
User "1" -- "1" Couple : belongs to
Couple "1" -- "*" Milestone : has
Couple "1" -- "*" MoodTrend : tracks
Couple "1" -- "*" PositivePattern : identifies

User "1" -- "*" GratitudeEntry : creates
User "1" -- "*" Appreciation : expresses
User "1" -- "*" Reflection : writes
User "1" -- "*" MoodLog : logs
User "1" -- "1" LoveLanguageProfile : has
User "1" -- "1" GratitudeStreak : maintains
User "1" -- "1" PrivacySettings : configures
User "1" -- "*" AuditLog : generates

GratitudeEntry "1" -- "*" GratitudeAcknowledgment : receives
Reflection "*" -- "0..1" ReflectionPrompt : based on
Reflection "1" -- "0..1" WeeklyReview : detailed by
ConversationPrompt "1" -- "*" PromptResponse : generates
JointJournal "*" -- "2" User : co-authored by
CommunicationGoal "*" -- "2" User : shared between
Milestone "1" -- "*" MilestonePhoto : contains

@enduml
