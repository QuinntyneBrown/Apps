@startuml Person Management Class Diagram

class Person <<Aggregate Root>> {
  - personId: Guid
  - userId: Guid
  - fullName: string
  - givenName: string
  - surname: string
  - gender: Gender
  - birthDate: DateTime?
  - birthPlace: string
  - isLiving: bool
  - deathDate: DateTime?
  - deathPlace: string
  - generation: int
  - biography: string
  --
  + AddPerson(): void
  + UpdateDetails(fields): void
  + RecordDeath(date, place): void
  + CalculateAge(): int
  - RaisePersonAdded(): void
  - RaisePersonDetailsUpdated(): void
  - RaiseDeathRecorded(): void
}

enum Gender {
  Male
  Female
  Unknown
}

class AddPersonCommand {
  + UserId: Guid
  + FullName: string
  + BirthDate: DateTime?
  + BirthPlace: string
  + Gender: Gender
}

class UpdatePersonDetailsCommand {
  + PersonId: Guid
  + UpdatedFields: Dictionary<string, object>
}

class PersonAdded <<Domain Event>> {
  + PersonId: Guid
  + FullName: string
  + BirthDate: DateTime?
  + Generation: int
  + OccurredAt: DateTime
}

interface IPersonRepository {
  + Add(person: Person): void
  + Update(person: Person): void
  + GetById(id: Guid): Person
  + GetByTreeId(treeId: Guid): List<Person>
}

Person *-- Gender

@enduml
