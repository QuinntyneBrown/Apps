<div class="reviews">
  <div class="reviews__container">
    <div class="reviews__header">
      <h1 class="reviews__title">Reviews</h1>
      <button mat-raised-button color="primary">
        <mat-icon>add</mat-icon>
        Write Review
      </button>
    </div>

    <ng-container *ngIf="reviews$ | async as reviews">
      <div class="reviews__grid" *ngIf="reviews.length > 0; else noReviews">
        <mat-card *ngFor="let review of reviews" class="reviews__card">
          <mat-card-header>
            <div class="reviews__rating">
              <mat-icon *ngFor="let filled of getStarArray(review.rating)" [class.reviews__star--filled]="filled">
                {{ filled ? 'star' : 'star_border' }}
              </mat-icon>
            </div>
            <mat-card-subtitle>{{ review.reviewDate | date }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p class="reviews__text">{{ review.reviewText }}</p>
            <div class="reviews__recommendation" *ngIf="review.isRecommended">
              <mat-icon>thumb_up</mat-icon>
              <span>Recommended</span>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button>
              <mat-icon>edit</mat-icon>
              Edit
            </button>
            <button mat-button color="warn" (click)="onDeleteReview(review)">
              <mat-icon>delete</mat-icon>
              Delete
            </button>
          </mat-card-actions>
        </mat-card>
      </div>

      <ng-template #noReviews>
        <div class="reviews__empty">
          <mat-icon>rate_review</mat-icon>
          <p>No reviews yet. Write your first review!</p>
        </div>
      </ng-template>
    </ng-container>
  </div>
</div>
