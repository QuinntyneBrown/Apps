@startuml Environment Configuration - Use Case Diagram

left to right direction
skinparam packageStyle rectangle

' Actors
actor "User" as User
actor "System" as System
actor "Slack" as Slack
actor "Microsoft Teams" as Teams
actor "Calendar Service" as Calendar
actor "Browser Extension" as Browser
actor "Desktop App" as Desktop

' Package for Environment Configuration
rectangle "Environment Configuration System" {

    ' Environment Settings Use Cases
    package "Environment Settings" {
        usecase "Configure Theme" as UC1
        usecase "Set Notification Preferences" as UC2
        usecase "Configure Display Settings" as UC3
        usecase "Connect Integration" as UC4
        usecase "Disconnect Integration" as UC5
        usecase "Save Environment Configuration" as UC6
        usecase "Reset to Defaults" as UC7
    }

    ' Focus Mode Use Cases
    package "Focus Mode Management" {
        usecase "Activate Focus Mode" as UC8
        usecase "Select Focus Level" as UC9
        usecase "Configure Website Blocking" as UC10
        usecase "Configure App Blocking" as UC11
        usecase "Set Auto-Reply Message" as UC12
        usecase "Deactivate Focus Mode" as UC13
        usecase "Pause Focus Mode" as UC14
        usecase "View Focus Mode Status" as UC15
    }

    ' Background Noise Use Cases
    package "Background Noise" {
        usecase "Enable Background Noise" as UC16
        usecase "Select Noise Type" as UC17
        usecase "Adjust Volume" as UC18
        usecase "Preview Noise" as UC19
        usecase "Set Custom Audio URL" as UC20
        usecase "Configure Auto-Start" as UC21
    }

    ' System Use Cases
    package "System Actions" {
        usecase "Apply Blocking Rules" as SYS1
        usecase "Update Integration Status" as SYS2
        usecase "Stream Audio" as SYS3
        usecase "Auto-Deactivate Focus Mode" as SYS4
        usecase "Send Notifications" as SYS5
        usecase "Publish Domain Events" as SYS6
    }
}

' User Relationships - Environment Settings
User --> UC1
User --> UC2
User --> UC3
User --> UC4
User --> UC5
User --> UC6
User --> UC7

' User Relationships - Focus Mode
User --> UC8
User --> UC9
User --> UC10
User --> UC11
User --> UC12
User --> UC13
User --> UC14
User --> UC15

' User Relationships - Background Noise
User --> UC16
User --> UC17
User --> UC18
User --> UC19
User --> UC20
User --> UC21

' Include Relationships
UC6 ..> SYS6 : <<include>>
UC8 ..> UC9 : <<include>>
UC8 ..> SYS1 : <<include>>
UC8 ..> SYS2 : <<include>>
UC8 ..> SYS6 : <<include>>
UC13 ..> SYS1 : <<include>>
UC13 ..> SYS2 : <<include>>
UC13 ..> SYS6 : <<include>>
UC16 ..> SYS3 : <<include>>
UC16 ..> SYS6 : <<include>>

' Extend Relationships
UC10 ..> UC8 : <<extend>>
UC11 ..> UC8 : <<extend>>
UC12 ..> UC8 : <<extend>>
UC20 ..> UC17 : <<extend>>
UC14 ..> UC15 : <<extend>>

' System Relationships
System --> SYS4
System --> SYS5
System --> SYS6

' External Service Relationships
SYS1 --> Browser : <<uses>>
SYS1 --> Desktop : <<uses>>
SYS2 --> Slack : <<updates>>
SYS2 --> Teams : <<updates>>
SYS2 --> Calendar : <<updates>>
UC4 --> Slack : <<connects>>
UC4 --> Teams : <<connects>>
UC4 --> Calendar : <<connects>>

' Notes
note right of UC8
  Focus mode activation
  automatically applies all
  configured blocking rules
  and updates integrations
end note

note bottom of UC9
  Focus levels: Deep, Moderate, Light
  Each level has preset blocking rules
  that can be customized
end note

note left of SYS4
  System automatically deactivates
  focus mode when:
  - Session ends
  - Estimated time reached
  - User manually deactivates
end note

note right of UC16
  Background noise can auto-start
  when a focus session begins
  if configured
end note

@enduml
