<div class="page-container">
  <div class="page-header">
    <h1 class="page-header__title">Dashboard</h1>
    <p>Welcome to Personal Budget Tracker</p>
  </div>

  @if (viewModel$ | async; as vm) {
    <div class="cards-grid">
      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-card__title">Total Budgets</div>
          <div class="stat-card__value">{{ vm.totalBudgets }}</div>
          <div class="stat-card__subtitle">
            {{ vm.activeBudgets.length }} active
          </div>
        </mat-card-content>
        <mat-card-actions align="end">
          <a mat-button color="primary" routerLink="/budgets">
            View All
            <mat-icon>arrow_forward</mat-icon>
          </a>
        </mat-card-actions>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-card__title">Total Income</div>
          <div class="stat-card__value" style="color: #4caf50;">{{ vm.totalIncomes | currency }}</div>
          <div class="stat-card__subtitle">
            {{ vm.incomeCount }} entries
          </div>
        </mat-card-content>
        <mat-card-actions align="end">
          <a mat-button color="primary" routerLink="/incomes">
            View All
            <mat-icon>arrow_forward</mat-icon>
          </a>
        </mat-card-actions>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-card__title">Total Expenses</div>
          <div class="stat-card__value" style="color: #f44336;">{{ vm.totalExpenses | currency }}</div>
          <div class="stat-card__subtitle">
            {{ vm.expenseCount }} entries
          </div>
        </mat-card-content>
        <mat-card-actions align="end">
          <a mat-button color="primary" routerLink="/expenses">
            View All
            <mat-icon>arrow_forward</mat-icon>
          </a>
        </mat-card-actions>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-content>
          <div class="stat-card__title">Net Balance</div>
          <div class="stat-card__value"
               [style.color]="vm.totalIncomes - vm.totalExpenses > 0 ? '#4caf50' : '#f44336'">
            {{ (vm.totalIncomes - vm.totalExpenses) | currency }}
          </div>
          <div class="stat-card__subtitle">
            Overall balance
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    @if (vm.recentBudgets.length > 0) {
      <div class="dashboard__section">
        <h2>Recent Budgets</h2>
        <div class="cards-grid">
          @for (budget of vm.recentBudgets; track budget.budgetId) {
            <app-budget-card [budget]="budget"></app-budget-card>
          }
        </div>
      </div>
    }
  }
</div>
