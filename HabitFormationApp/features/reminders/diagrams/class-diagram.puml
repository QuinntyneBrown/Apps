@startuml Reminders - Class Diagram

class Reminder <<Aggregate>> {
  - Id: Guid
  - HabitId: Guid
  - ScheduledFor: DateTime
  - Message: string
  - Status: ReminderStatus
  - ResponseTimeMinutes: int?
  --
  + Create(): Reminder
  + MarkSent(): void
  + MarkActedUpon(actedAt): void
  + Snooze(minutes): void
}

enum ReminderStatus {
  Pending
  Sent
  ActedUpon
  Ignored
  Snoozed
  Expired
}

enum ReminderChannel {
  Push
  Email
  SMS
}

class ReminderSchedule <<Entity>> {
  - HabitId: Guid
  - TimeOfDay: TimeSpan
  - DaysOfWeek: int[]
  - IsEnabled: bool
  --
  + Update(): void
  + GenerateReminder(date): Reminder
}

class ReminderScheduled <<Event>> {
  + ReminderId: Guid
  + HabitId: Guid
  + ScheduledFor: DateTime
}

class ReminderActedUpon <<Event>> {
  + ReminderId: Guid
  + ResponseTimeMinutes: int
}

Reminder ..> ReminderStatus
Reminder ..> ReminderChannel
Reminder ..> ReminderScheduled: publishes
Reminder ..> ReminderActedUpon: publishes
ReminderSchedule ..> Reminder: generates

@enduml
