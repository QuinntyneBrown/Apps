@startuml Analytics - Class Diagram

class WeeklyReport <<Aggregate>> {
  - Id: Guid
  - UserId: Guid
  - WeekStartDate: DateTime
  - CompletionRate: double
  - TotalCompletions: int
  - ActiveStreaks: int
  --
  + Generate(): WeeklyReport
}

class HabitPattern <<Entity>> {
  - UserId: Guid
  - PatternType: PatternType
  - Confidence: double
  - Description: string
  --
  + Identify(): HabitPattern
}

class SuccessFactor <<Entity>> {
  - Factor: string
  - CorrelationScore: double
  - Recommendation: string
  --
  + Analyze(): SuccessFactor
}

enum PatternType {
  TimeOfDay
  DayOfWeek
  Consistency
  Behavior
  Social
}

class WeeklyProgressReportGenerated <<Event>> {
  + ReportId: Guid
  + UserId: Guid
  + WeekStartDate: DateTime
}

class HabitPatternIdentified <<Event>> {
  + PatternId: Guid
  + UserId: Guid
  + PatternType: PatternType
}

WeeklyReport ..> WeeklyProgressReportGenerated: publishes
HabitPattern ..> PatternType
HabitPattern ..> HabitPatternIdentified: publishes

@enduml
