<div class="campsite-detail" *ngIf="(campsite$ | async) as campsite">
  <div class="campsite-detail__header">
    <button mat-icon-button (click)="goBack()" class="campsite-detail__back-button">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1 class="campsite-detail__title">{{ campsite.name }}</h1>
  </div>

  <mat-card class="campsite-detail__card">
    <mat-card-header>
      <mat-card-title class="campsite-detail__card-title">
        {{ campsite.name }}
        <mat-icon *ngIf="campsite.isFavorite" class="campsite-detail__favorite-icon">star</mat-icon>
      </mat-card-title>
      <mat-card-subtitle>{{ campsite.location }}</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="campsite-detail__chips">
        <mat-chip>{{ getCampsiteTypeName(campsite.campsiteType) }}</mat-chip>
        <mat-chip *ngIf="campsite.hasElectricity">Electricity</mat-chip>
        <mat-chip *ngIf="campsite.hasWater">Water</mat-chip>
      </div>

      <div class="campsite-detail__section">
        <h3 class="campsite-detail__section-title">Description</h3>
        <p class="campsite-detail__description">
          {{ campsite.description || 'No description available' }}
        </p>
      </div>

      <div class="campsite-detail__section" *ngIf="campsite.costPerNight">
        <h3 class="campsite-detail__section-title">Cost</h3>
        <p class="campsite-detail__cost">${{ campsite.costPerNight }} per night</p>
      </div>

      <div class="campsite-detail__section">
        <h3 class="campsite-detail__section-title">Amenities</h3>
        <ul class="campsite-detail__amenities">
          <li>
            <mat-icon>{{ campsite.hasElectricity ? 'check_circle' : 'cancel' }}</mat-icon>
            Electricity
          </li>
          <li>
            <mat-icon>{{ campsite.hasWater ? 'check_circle' : 'cancel' }}</mat-icon>
            Water
          </li>
        </ul>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="campsite-detail__reviews">
    <mat-card-header>
      <mat-card-title>Reviews</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="(reviews$ | async) as reviews">
        <div *ngIf="reviews.length === 0" class="campsite-detail__no-reviews">
          <p>No reviews yet</p>
        </div>
        <div *ngFor="let review of reviews" class="campsite-detail__review">
          <div class="campsite-detail__review-rating">
            <mat-icon *ngFor="let star of [1,2,3,4,5]"
              [class.campsite-detail__review-star--filled]="star <= review.rating">
              star
            </mat-icon>
          </div>
          <p class="campsite-detail__review-text">{{ review.reviewText }}</p>
          <p class="campsite-detail__review-date">{{ review.reviewDate | date }}</p>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
