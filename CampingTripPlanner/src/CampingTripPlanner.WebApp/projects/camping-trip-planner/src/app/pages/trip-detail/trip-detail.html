<div class="trip-detail" *ngIf="(trip$ | async) as trip">
  <div class="trip-detail__header">
    <button mat-icon-button (click)="goBack()" class="trip-detail__back-button">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <h1 class="trip-detail__title">{{ trip.name }}</h1>
  </div>

  <mat-card class="trip-detail__card">
    <mat-card-header>
      <mat-card-title class="trip-detail__card-title">
        {{ trip.name }}
        <mat-icon *ngIf="isUpcoming(trip.startDate)" class="trip-detail__status-icon trip-detail__status-icon--upcoming">
          event_upcoming
        </mat-icon>
        <mat-icon *ngIf="isPast(trip.endDate)" class="trip-detail__status-icon trip-detail__status-icon--past">
          event_available
        </mat-icon>
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="trip-detail__section">
        <h3 class="trip-detail__section-title">Dates</h3>
        <p class="trip-detail__dates">
          {{ trip.startDate | date:'fullDate' }} - {{ trip.endDate | date:'fullDate' }}
        </p>
        <p class="trip-detail__duration">
          Duration: {{ getDuration(trip.startDate, trip.endDate) }} {{ getDuration(trip.startDate, trip.endDate) === 1 ? 'day' : 'days' }}
        </p>
      </div>

      <div class="trip-detail__section">
        <h3 class="trip-detail__section-title">Attendees</h3>
        <p class="trip-detail__attendees">
          <mat-icon>people</mat-icon>
          {{ trip.numberOfPeople }} {{ trip.numberOfPeople === 1 ? 'person' : 'people' }}
        </p>
      </div>

      <div class="trip-detail__section" *ngIf="trip.notes">
        <h3 class="trip-detail__section-title">Notes</h3>
        <p class="trip-detail__notes">{{ trip.notes }}</p>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="trip-detail__gear">
    <mat-card-header>
      <mat-card-title>Gear Checklist</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div *ngIf="(gearChecklists$ | async) as gearChecklists">
        <div *ngIf="gearChecklists.length === 0" class="trip-detail__no-gear">
          <p>No gear items yet</p>
        </div>
        <div *ngFor="let item of gearChecklists" class="trip-detail__gear-item">
          <mat-icon [class.trip-detail__gear-icon--packed]="item.isPacked">
            {{ item.isPacked ? 'check_box' : 'check_box_outline_blank' }}
          </mat-icon>
          <div class="trip-detail__gear-info">
            <span class="trip-detail__gear-name">{{ item.itemName }}</span>
            <span class="trip-detail__gear-quantity">x{{ item.quantity }}</span>
          </div>
        </div>
      </div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" routerLink="/gear-checklists">
        Manage Gear
      </button>
    </mat-card-actions>
  </mat-card>
</div>
