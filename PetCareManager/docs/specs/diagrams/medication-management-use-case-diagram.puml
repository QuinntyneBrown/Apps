@startuml Medication Management - Use Case Diagram

!define PET_OWNER_COLOR #4FC3F7
!define VETERINARIAN_COLOR #81C784
!define SYSTEM_COLOR #FFB74D
!define PHARMACY_COLOR #9575CD

left to right direction

' Actors
actor "Pet Owner" as Owner PET_OWNER_COLOR
actor "Veterinarian" as Vet VETERINARIAN_COLOR
actor "System" as System SYSTEM_COLOR
actor "Pharmacy\nSystem" as Pharmacy PHARMACY_COLOR

' Use Case Package
rectangle "Medication Management System" {

    ' Medication Prescription Use Cases
    package "Prescription Management" #E8F5E9 {
        usecase "Prescribe\nMedication" as UC1
        usecase "View Medication\nDetails" as UC2
        usecase "Edit Medication\nInformation" as UC3
        usecase "Discontinue\nMedication" as UC4
        usecase "Review Prescription\nHistory" as UC5
    }

    ' Medication Administration Use Cases
    package "Medication Administration" #E1F5FF {
        usecase "Record Dose\nAdministered" as UC6
        usecase "Mark Dose\nas Missed" as UC7
        usecase "View Medication\nSchedule" as UC8
        usecase "View Today's\nDoses" as UC9
        usecase "Update Administration\nNotes" as UC10
    }

    ' Schedule Management Use Cases
    package "Schedule Management" #FFF9E1 {
        usecase "Generate Medication\nSchedule" as UC11
        usecase "View Weekly\nSchedule" as UC12
        usecase "Export Schedule\nto Calendar" as UC13
        usecase "Adjust Dose\nTiming" as UC14
    }

    ' Reminder & Notification Use Cases
    package "Reminders & Notifications" #F3E5F5 {
        usecase "Send Dose\nReminders" as UC15
        usecase "Configure Reminder\nPreferences" as UC16
        usecase "Send Missed Dose\nAlerts" as UC17
        usecase "View Notification\nHistory" as UC18
        usecase "Snooze\nReminder" as UC19
    }

    ' Refill Management Use Cases
    package "Refill Management" #FFE0E0 {
        usecase "Monitor Supply\nLevels" as UC20
        usecase "Send Refill\nAlerts" as UC21
        usecase "Record\nRefill" as UC22
        usecase "Order Refill\nOnline" as UC23
        usecase "View Refill\nHistory" as UC24
        usecase "Calculate Days\nRemaining" as UC25
    }

    ' Adherence & Reporting Use Cases
    package "Adherence & Reporting" #E0F2F1 {
        usecase "Calculate Adherence\nRate" as UC26
        usecase "View Adherence\nReport" as UC27
        usecase "Generate Vet\nReport" as UC28
        usecase "View Administration\nHistory" as UC29
        usecase "Identify Adherence\nPatterns" as UC30
    }

    ' Integration Use Cases
    package "System Integration" #F5F5F5 {
        usecase "Sync with Vet\nPractice System" as UC31
        usecase "Integrate with\nPharmacy" as UC32
        usecase "Send Calendar\nInvites" as UC33
    }
}

' Pet Owner Relationships
Owner --> UC1 : initiates
Owner --> UC2 : views
Owner --> UC3 : updates
Owner --> UC4 : requests
Owner --> UC5 : reviews
Owner --> UC6 : records
Owner --> UC7 : marks
Owner --> UC8 : checks
Owner --> UC9 : views
Owner --> UC10 : adds
Owner --> UC12 : views
Owner --> UC13 : exports
Owner --> UC14 : adjusts
Owner --> UC16 : configures
Owner --> UC18 : views
Owner --> UC19 : snoozes
Owner --> UC22 : records
Owner --> UC23 : orders
Owner --> UC24 : views
Owner --> UC27 : views
Owner --> UC28 : generates
Owner --> UC29 : reviews

' Veterinarian Relationships
Vet --> UC1 : prescribes
Vet --> UC2 : reviews
Vet --> UC4 : discontinues
Vet --> UC5 : reviews
Vet --> UC27 : reviews
Vet --> UC28 : receives
Vet --> UC29 : reviews
Vet --> UC31 : integrates

' System Relationships
System --> UC11 : generates
System --> UC15 : sends
System --> UC17 : sends
System --> UC20 : monitors
System --> UC21 : sends
System --> UC25 : calculates
System --> UC26 : calculates
System --> UC30 : identifies
System --> UC31 : syncs

' Pharmacy Relationships
Pharmacy --> UC23 : processes
Pharmacy --> UC32 : integrates

' Use Case Dependencies and Extensions

' Prescribe Medication includes Generate Schedule
UC1 ..> UC11 : <<include>>

' Record Dose includes Calculate Days Remaining
UC6 ..> UC25 : <<include>>

' Record Dose may trigger Refill Alert
UC6 ..> UC21 : <<extend>>
note on link
    when supply low
end note

' View Schedule includes Generate Schedule
UC8 ..> UC11 : <<include>>

' Send Dose Reminders based on Schedule
UC15 ..> UC8 : <<include>>

' Send Missed Dose Alerts detects missed doses
UC17 ..> UC7 : <<extend>>
note on link
    auto-detect
end note

' Monitor Supply triggers Refill Alert
UC20 ..> UC21 : <<extend>>
note on link
    threshold reached
end note

' Calculate Adherence uses Administration History
UC26 ..> UC29 : <<include>>

' View Adherence Report uses Calculate Adherence
UC27 ..> UC26 : <<include>>

' Generate Vet Report includes multiple sources
UC28 ..> UC27 : <<include>>
UC28 ..> UC29 : <<include>>
UC28 ..> UC5 : <<include>>

' Identify Patterns uses Adherence Calculation
UC30 ..> UC26 : <<include>>

' Order Refill Online integrates with Pharmacy
UC23 ..> UC32 : <<include>>

' Export Schedule uses Calendar Integration
UC13 ..> UC33 : <<include>>

' Sync with Vet System includes Prescription Data
UC31 ..> UC1 : <<extend>>
note on link
    import prescriptions
end note

' Notes
note right of Owner
    Primary user who manages
    daily medication tasks for
    their pets

    Key goals:
    - Never miss a dose
    - Track adherence
    - Manage refills
    - Share info with vet
end note

note right of Vet
    Prescribes medications
    and monitors patient
    adherence

    Key goals:
    - Prescribe accurately
    - Monitor compliance
    - Adjust treatments
    - Receive alerts for issues
end note

note bottom of System
    Automated system actor
    that handles:
    - Schedule generation
    - Reminder notifications
    - Supply monitoring
    - Adherence calculations
    - Pattern detection
end note

note "Critical Feature: Never miss a dose\nProactive reminders ensure pet health" as N1
note "Data-Driven: Track adherence patterns\nto improve medication compliance" as N2
note "Integrated: Connect with vets and\npharmacies for seamless care" as N3

' Position notes
N1 .. UC15
N2 .. UC26
N3 .. UC31

@enduml
