@startuml Veterinary Management - Class Diagram

' Define styles
skinparam class {
    BackgroundColor<<Aggregate>> LightYellow
    BackgroundColor<<Entity>> LightBlue
    BackgroundColor<<ValueObject>> LightGreen
    BackgroundColor<<DomainEvent>> LightCoral
    BorderColor Black
    ArrowColor Black
}

skinparam packageStyle rectangle

' Domain Events Package
package "Domain Events" {
    class VetAppointmentScheduled <<DomainEvent>> {
        + AppointmentId : Guid
        + PetId : Guid
        + OwnerId : Guid
        + VeterinarianId : Guid
        + AppointmentDateTime : DateTime
        + AppointmentType : string
        + Reason : string
        + ScheduledBy : string
        + ScheduledAt : DateTime
        + Status : string
    }

    class VetAppointmentCompleted <<DomainEvent>> {
        + AppointmentId : Guid
        + PetId : Guid
        + VeterinarianId : Guid
        + CompletedAt : DateTime
        + Duration : int
        + ServicesProvided : List<string>
        + Notes : string
        + FollowUpRequired : bool
        + NextAppointmentDate : DateTime?
        + TotalCost : decimal
    }

    class DiagnosisReceived <<DomainEvent>> {
        + DiagnosisId : Guid
        + PetId : Guid
        + AppointmentId : Guid?
        + VeterinarianId : Guid
        + DiagnosisDate : DateTime
        + Condition : string
        + Severity : string
        + Symptoms : List<string>
        + TreatmentPlan : string
        + Prognosis : string
        + FollowUpRequired : bool
    }

    class VeterinaryEmergency <<DomainEvent>> {
        + EmergencyId : Guid
        + PetId : Guid
        + OwnerId : Guid
        + ReportedAt : DateTime
        + EmergencyType : string
        + Symptoms : List<string>
        + Description : string
        + Location : string
        + UrgencyLevel : string
        + ContactNumber : string
        + AssignedVetId : Guid?
    }
}

' Aggregates Package
package "Aggregates" {
    class VetAppointment <<Aggregate>> {
        + AppointmentId : Guid
        + PetId : Guid
        + OwnerId : Guid
        + VeterinarianId : Guid
        + ScheduledDateTime : DateTime
        + ActualStartTime : DateTime?
        + ActualEndTime : DateTime?
        + AppointmentType : AppointmentType
        + Status : AppointmentStatus
        + Reason : string
        + Notes : string
        + ConfirmationNumber : string
        + CreatedAt : DateTime
        + UpdatedAt : DateTime
        --
        + Schedule() : void
        + Confirm() : void
        + StartAppointment() : void
        + CompleteAppointment(services, notes) : void
        + CancelAppointment(reason) : void
        + Reschedule(newDateTime) : void
        + CheckIn() : void
    }

    class Diagnosis <<Aggregate>> {
        + DiagnosisId : Guid
        + PetId : Guid
        + AppointmentId : Guid?
        + VeterinarianId : Guid
        + DiagnosisDate : DateTime
        + Condition : string
        + Severity : SeverityLevel
        + Symptoms : List<string>
        + DiagnosisNotes : string
        + TreatmentPlan : string
        + Prognosis : string
        + FollowUpDate : DateTime?
        + Status : DiagnosisStatus
        + CreatedAt : DateTime
        + UpdatedAt : DateTime
        --
        + CreateDiagnosis() : void
        + UpdateTreatmentPlan(plan) : void
        + MarkResolved() : void
        + AddMedication(medication) : void
        + ScheduleFollowUp(date) : void
        + UpdateStatus(status) : void
    }

    class Emergency <<Aggregate>> {
        + EmergencyId : Guid
        + PetId : Guid
        + OwnerId : Guid
        + ReportedAt : DateTime
        + EmergencyType : EmergencyType
        + Symptoms : List<string>
        + Description : string
        + Location : string
        + UrgencyLevel : UrgencyLevel
        + TriageStatus : string
        + AssignedVetId : Guid?
        + ResolutionTime : DateTime?
        + Outcome : string
        + Status : EmergencyStatus
        + ContactNumber : string
        --
        + ReportEmergency() : void
        + AssignVeterinarian(vetId) : void
        + UpdateTriageStatus(status) : void
        + UpdateStatus(status) : void
        + ResolveEmergency(outcome) : void
        + Escalate() : void
    }
}

' Entities Package
package "Entities" {
    class Pet <<Entity>> {
        + PetId : Guid
        + OwnerId : Guid
        + Name : string
        + Species : string
        + Breed : string
        + DateOfBirth : DateTime
        + Weight : decimal
        + MicrochipNumber : string
        + Photo : string
        --
        + GetAge() : int
        + UpdateWeight(weight) : void
    }

    class Owner <<Entity>> {
        + OwnerId : Guid
        + FirstName : string
        + LastName : string
        + Email : string
        + PhoneNumber : string
        + Address : Address
        --
        + GetFullName() : string
        + UpdateContactInfo(email, phone) : void
    }

    class Veterinarian <<Entity>> {
        + VeterinarianId : Guid
        + FirstName : string
        + LastName : string
        + LicenseNumber : string
        + Specializations : List<string>
        + Email : string
        + PhoneNumber : string
        + IsOnCall : bool
        --
        + GetFullName() : string
        + SetOnCallStatus(status) : void
    }

    class Service <<Entity>> {
        + ServiceId : Guid
        + AppointmentId : Guid
        + ServiceType : string
        + Description : string
        + Duration : int
        + Cost : decimal
        + PerformedAt : DateTime
    }

    class Medication <<Entity>> {
        + MedicationId : Guid
        + DiagnosisId : Guid
        + Name : string
        + Dosage : string
        + Frequency : string
        + Duration : string
        + Instructions : string
        + StartDate : DateTime
        + EndDate : DateTime?
    }

    class Prescription <<Entity>> {
        + PrescriptionId : Guid
        + AppointmentId : Guid
        + DiagnosisId : Guid?
        + VeterinarianId : Guid
        + PrescriptionDate : DateTime
        + Status : string
    }
}

' Value Objects Package
package "Value Objects" {
    class Address <<ValueObject>> {
        + Street : string
        + City : string
        + State : string
        + ZipCode : string
        + Country : string
        --
        + GetFullAddress() : string
    }

    class ContactInfo <<ValueObject>> {
        + Email : string
        + PhoneNumber : string
        + AlternativePhone : string
        --
        + IsValid() : bool
    }
}

' Enumerations Package
package "Enumerations" {
    enum AppointmentType {
        WellnessCheckup
        Vaccination
        Surgery
        DentalCleaning
        Emergency
        Consultation
        FollowUp
    }

    enum AppointmentStatus {
        Scheduled
        Confirmed
        CheckedIn
        InProgress
        Completed
        Cancelled
        NoShow
    }

    enum SeverityLevel {
        Mild
        Moderate
        Severe
        Critical
    }

    enum DiagnosisStatus {
        Active
        Resolved
        Chronic
        UnderTreatment
    }

    enum EmergencyType {
        Injury
        Poisoning
        AcuteIllness
        Accident
        DifficultyBreathing
        Seizure
        Other
    }

    enum UrgencyLevel {
        Critical
        High
        Medium
    }

    enum EmergencyStatus {
        Reported
        Triaged
        InProgress
        Resolved
        Escalated
    }
}

' Relationships - Aggregates to Entities
VetAppointment "1" --> "1" Pet : for
VetAppointment "1" --> "1" Owner : belongs to
VetAppointment "1" --> "1" Veterinarian : assigned to
VetAppointment "1" --> "*" Service : includes

Diagnosis "1" --> "1" Pet : for
Diagnosis "1" --> "0..1" VetAppointment : related to
Diagnosis "1" --> "1" Veterinarian : created by
Diagnosis "1" --> "*" Medication : prescribes

Emergency "1" --> "1" Pet : for
Emergency "1" --> "1" Owner : reported by
Emergency "0..1" --> "0..1" Veterinarian : assigned to

Pet "*" --> "1" Owner : owned by

Prescription "1" --> "1" VetAppointment : issued during
Prescription "1" --> "0..1" Diagnosis : for
Prescription "1" --> "1" Veterinarian : prescribed by
Prescription "1" --> "*" Medication : contains

' Relationships - Entities to Value Objects
Owner "1" --> "1" Address : has
Owner "1" --> "1" ContactInfo : has
Veterinarian "1" --> "1" ContactInfo : has

' Relationships - Aggregates to Enums
VetAppointment --> AppointmentType
VetAppointment --> AppointmentStatus
Diagnosis --> SeverityLevel
Diagnosis --> DiagnosisStatus
Emergency --> EmergencyType
Emergency --> UrgencyLevel
Emergency --> EmergencyStatus

' Relationships - Domain Events to Aggregates (raised by)
VetAppointment ..> VetAppointmentScheduled : raises
VetAppointment ..> VetAppointmentCompleted : raises
Diagnosis ..> DiagnosisReceived : raises
Emergency ..> VeterinaryEmergency : raises

' Notes
note right of VetAppointment
    Main aggregate for managing
    veterinary appointments.
    Raises domain events on
    state changes.
end note

note right of Emergency
    High priority aggregate.
    Triggers immediate notifications
    to on-call veterinarians.
end note

note right of Diagnosis
    Contains complete medical
    diagnosis information and
    treatment plan.
end note

@enduml
