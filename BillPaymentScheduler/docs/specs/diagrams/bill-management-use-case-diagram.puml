@startuml Bill Management Use Case Diagram

left to right direction
skinparam packageStyle rectangle

actor "User" as User
actor "System" as System

rectangle "Bill Management" {
  usecase "Add Bill" as UC1
  usecase "View Bills" as UC2
  usecase "Edit Bill" as UC3
  usecase "Delete Bill" as UC4
  usecase "Search Bills" as UC5
  usecase "Filter Bills" as UC6
  usecase "View Bill Details" as UC7
  usecase "Update Bill Amount" as UC8
  usecase "Update Bill Due Date" as UC9
  usecase "Categorize Bill" as UC10
  usecase "Add Tags to Bill" as UC11
  usecase "View Upcoming Bills" as UC12
  usecase "View Overdue Bills" as UC13
  usecase "Activate/Deactivate Bill" as UC14
  usecase "Export Bills" as UC15
  usecase "View Bill History" as UC16
  usecase "Set Recurrence Pattern" as UC17
  usecase "View Bills by Category" as UC18
  usecase "View Bill Calendar" as UC19

  usecase "Validate Bill Data" as UC20
  usecase "Publish Domain Event" as UC21
  usecase "Send Notifications" as UC22
  usecase "Update Cash Flow Projections" as UC23
  usecase "Create Recurring Bill Instances" as UC24
}

' User interactions
User --> UC1
User --> UC2
User --> UC3
User --> UC4
User --> UC5
User --> UC6
User --> UC7
User --> UC8
User --> UC9
User --> UC10
User --> UC11
User --> UC12
User --> UC13
User --> UC14
User --> UC15
User --> UC16
User --> UC17
User --> UC18
User --> UC19

' System interactions
System --> UC24

' Include relationships
UC1 ..> UC20 : <<include>>
UC1 ..> UC21 : <<include>>
UC3 ..> UC20 : <<include>>
UC8 ..> UC20 : <<include>>
UC8 ..> UC21 : <<include>>
UC9 ..> UC20 : <<include>>
UC9 ..> UC21 : <<include>>
UC4 ..> UC21 : <<include>>

' Extend relationships
UC1 ..> UC22 : <<extend>>
UC3 ..> UC22 : <<extend>>
UC4 ..> UC22 : <<extend>>
UC1 ..> UC23 : <<extend>>
UC8 ..> UC23 : <<extend>>
UC9 ..> UC23 : <<extend>>

' Notes
note right of UC1
  User creates a new bill
  with payee, amount, due date,
  and optional details
end note

note right of UC8
  User updates the amount
  for an existing bill.
  Triggers BillAmountChanged event.
end note

note right of UC9
  User changes the due date
  for an existing bill.
  Triggers BillDueDateChanged event.
end note

note right of UC4
  User deletes a bill.
  System checks for active
  autopay and scheduled payments.
end note

note right of UC24
  Background job that runs daily
  to create next instances of
  recurring bills.
end note

note bottom of UC21
  Domain events published:
  - BillAdded
  - BillAmountChanged
  - BillDueDateChanged
  - BillDeleted
end note

@enduml
