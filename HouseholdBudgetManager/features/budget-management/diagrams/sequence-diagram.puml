@startuml Create Budget Sequence

actor User
participant UI
participant API
participant BudgetService
participant EventBus

User -> UI: Create new budget
UI -> UI: Display budget wizard
User -> UI: Enter budget details\nand allocations
UI -> API: POST /api/budgets
API -> BudgetService: CreateBudget(command)
BudgetService -> BudgetService: Validate total allocations
BudgetService -> EventBus: Raise BudgetCreated
BudgetService -> EventBus: Raise BudgetCategoryAllocated\n(for each category)
BudgetService --> API: BudgetId
API --> UI: 201 Created
UI --> User: Success + redirect to dashboard

@enduml
