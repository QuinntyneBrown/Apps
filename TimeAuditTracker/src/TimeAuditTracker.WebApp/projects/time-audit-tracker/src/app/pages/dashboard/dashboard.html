<div class="dashboard" *ngIf="dashboardData$ | async as data">
  <div class="dashboard__header">
    <h1 class="dashboard__title">Dashboard</h1>
    <p class="dashboard__subtitle">Overview of your time tracking activities</p>
  </div>

  <div class="dashboard__stats">
    <mat-card class="dashboard__stat-card">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">schedule</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-value">{{ data.totalTimeBlocks }}</div>
        <div class="dashboard__stat-label">Time Blocks</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/time-blocks" color="primary">View All</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__stat-card">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">flag</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-value">{{ data.activeGoals }}</div>
        <div class="dashboard__stat-label">Active Goals</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/goals" color="primary">View All</button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__stat-card">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">assessment</mat-icon>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-value">{{ data.totalReports }}</div>
        <div class="dashboard__stat-label">Audit Reports</div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/audit-reports" color="primary">View All</button>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="dashboard__content">
    <mat-card class="dashboard__section">
      <mat-card-header>
        <mat-card-title>Recent Time Blocks</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="data.recentTimeBlocks.length === 0" class="dashboard__empty">
          No time blocks recorded yet.
        </div>
        <div *ngFor="let block of data.recentTimeBlocks" class="dashboard__item">
          <div class="dashboard__item-header">
            <span class="dashboard__item-title">{{ block.description }}</span>
            <span class="dashboard__item-category">{{ block.category }}</span>
          </div>
          <div class="dashboard__item-meta">
            <span>{{ block.startTime | date:'short' }}</span>
            <span *ngIf="block.durationInMinutes">{{ block.durationInMinutes }} min</span>
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/time-blocks" color="primary">
          <mat-icon>add</mat-icon>
          Add Time Block
        </button>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__section">
      <mat-card-header>
        <mat-card-title>Active Goals</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="data.activeGoalsList.length === 0" class="dashboard__empty">
          No active goals set yet.
        </div>
        <div *ngFor="let goal of data.activeGoalsList" class="dashboard__item">
          <div class="dashboard__item-header">
            <span class="dashboard__item-title">{{ goal.description }}</span>
            <span class="dashboard__item-category">{{ goal.category }}</span>
          </div>
          <div class="dashboard__item-meta">
            <span>Target: {{ goal.targetHoursPerWeek }} hrs/week</span>
            <span>{{ goal.targetHoursPerDay }} hrs/day</span>
          </div>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button routerLink="/goals" color="primary">
          <mat-icon>add</mat-icon>
          Add Goal
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
