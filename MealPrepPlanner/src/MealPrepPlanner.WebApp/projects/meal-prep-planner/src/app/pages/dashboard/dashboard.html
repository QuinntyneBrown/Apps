<div class="dashboard">
  <div class="dashboard__container">
    <h1 class="dashboard__title">Dashboard</h1>

    <ng-container *ngIf="viewModel$ | async as vm">
      <div class="dashboard__grid">
        <mat-card class="dashboard__card dashboard__card--active-plan">
          <mat-card-header>
            <mat-card-title>Active Meal Plan</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div *ngIf="vm.hasActivePlan; else noActivePlan">
              <h2 class="dashboard__plan-name">{{ vm.activePlan?.name }}</h2>
              <p class="dashboard__plan-dates">
                {{ vm.activePlan?.startDate | date:'mediumDate' }} - {{ vm.activePlan?.endDate | date:'mediumDate' }}
              </p>
              <p class="dashboard__plan-duration">Duration: {{ vm.activePlan?.duration }} days</p>
              <div class="dashboard__actions">
                <a mat-raised-button color="primary" [routerLink]="['/meal-plans', vm.activePlan?.mealPlanId]">
                  View Plan
                </a>
              </div>
            </div>
            <ng-template #noActivePlan>
              <p class="dashboard__empty-state">No active meal plan</p>
              <div class="dashboard__actions">
                <a mat-raised-button color="primary" routerLink="/meal-plans">
                  Create Meal Plan
                </a>
              </div>
            </ng-template>
          </mat-card-content>
        </mat-card>

        <mat-card class="dashboard__card">
          <mat-card-header>
            <mat-card-title>Quick Actions</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="dashboard__quick-actions">
              <a mat-raised-button routerLink="/recipes">
                <mat-icon>restaurant</mat-icon>
                Browse Recipes
              </a>
              <a mat-raised-button routerLink="/grocery">
                <mat-icon>shopping_cart</mat-icon>
                Grocery Lists
              </a>
              <a mat-raised-button routerLink="/nutrition">
                <mat-icon>analytics</mat-icon>
                Nutrition Tracking
              </a>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="dashboard__card">
          <mat-card-header>
            <mat-card-title>Recent Activity</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <p class="dashboard__empty-state">No recent activity</p>
          </mat-card-content>
        </mat-card>
      </div>
    </ng-container>
  </div>
</div>
