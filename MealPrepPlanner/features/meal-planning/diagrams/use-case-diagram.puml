@startuml Meal Planning - Use Case Diagram

left to right direction
skinparam packageStyle rectangle

actor "User" as User
actor "System" as System

rectangle "Meal Planning System" {

    package "Meal Plan Management" {
        usecase "Create Meal Plan" as UC1
        usecase "View Meal Plans" as UC2
        usecase "Edit Meal Plan" as UC3
        usecase "Delete Meal Plan" as UC4
        usecase "Activate Meal Plan" as UC5
        usecase "Complete Meal Plan" as UC6
        usecase "Duplicate Meal Plan" as UC7
    }

    package "Meal Assignment" {
        usecase "Assign Recipe to Meal Slot" as UC8
        usecase "Remove Meal from Plan" as UC9
        usecase "Update Meal Servings" as UC10
        usecase "Mark Meal as Completed" as UC11
        usecase "Add Notes to Meal" as UC12
    }

    package "Meal Plan Viewing" {
        usecase "View Active Meal Plan" as UC13
        usecase "View Meal Calendar" as UC14
        usecase "View Upcoming Meals" as UC15
        usecase "Filter Meal Plans by Status" as UC16
        usecase "Search Meal Plans" as UC17
    }

    package "Meal Plan Analysis" {
        usecase "View Meal Plan Statistics" as UC18
        usecase "View Completion Progress" as UC19
        usecase "Export Meal Plan" as UC20
    }

}

rectangle "Related Systems" {
    usecase "Generate Grocery List" as EXT1
    usecase "Calculate Nutrition" as EXT2
    usecase "Browse Recipes" as EXT3
}

' User interactions with Meal Plan Management
User --> UC1
User --> UC2
User --> UC3
User --> UC4
User --> UC5
User --> UC6
User --> UC7

' User interactions with Meal Assignment
User --> UC8
User --> UC9
User --> UC10
User --> UC11
User --> UC12

' User interactions with Meal Plan Viewing
User --> UC13
User --> UC14
User --> UC15
User --> UC16
User --> UC17

' User interactions with Meal Plan Analysis
User --> UC18
User --> UC19
User --> UC20

' Use case relationships - includes
UC1 ..> UC14 : <<include>>
UC3 ..> UC2 : <<include>>
UC5 ..> UC2 : <<include>>
UC6 ..> UC13 : <<include>>
UC7 ..> UC2 : <<include>>
UC8 ..> EXT3 : <<include>>
UC13 ..> UC14 : <<include>>
UC18 ..> UC2 : <<include>>
UC19 ..> UC13 : <<include>>

' Use case relationships - extends
UC10 ..> UC8 : <<extend>>
UC12 ..> UC8 : <<extend>>
UC16 ..> UC2 : <<extend>>
UC17 ..> UC2 : <<extend>>

' System-triggered use cases
System --> EXT1
System --> EXT2

' Triggers from user actions
UC5 --> EXT1 : <<trigger>>
UC8 --> EXT2 : <<trigger>>

note right of UC1
  User provides name and
  date range for new plan
end note

note right of UC5
  Only one active plan
  allowed per user
end note

note right of UC8
  Recipe must exist and
  date must be within
  meal plan range
end note

note bottom of EXT1
  Automatically triggered
  when meal plan is activated
end note

note bottom of EXT2
  Calculated when recipe
  is assigned to meal
end note

@enduml
