@startuml Exercise Library - Sequence Diagram
title Search and Create Custom Exercise

actor User
participant Frontend
participant API
participant Handler
participant Exercise
participant Repository
participant Database

== Search Exercises ==

User -> Frontend: Enter search "bench press"
Frontend -> API: GET /api/exercises?search=bench press
API -> Handler: SearchExercisesQuery
Handler -> Repository: SearchAsync(filters)
Repository -> Database: SELECT with filters
Database --> Repository: Exercise list
Repository --> Handler: List<Exercise>
Handler --> API: ExerciseDto list
API --> Frontend: 200 OK
Frontend -> Frontend: Display results

== Create Custom Exercise ==

User -> Frontend: Click "Create Exercise"
Frontend -> Frontend: Show exercise form
User -> Frontend: Fill details, submit
Frontend -> API: POST /api/exercises
API -> Handler: CreateExerciseCommand
Handler -> Exercise: Create(...)
Exercise -> Exercise: AddDomainEvent
Exercise --> Handler: Exercise instance
Handler -> Repository: AddAsync(exercise)
Repository -> Database: INSERT
Repository --> Handler: exerciseId
Handler --> API: exerciseId
API --> Frontend: 201 Created
Frontend -> Frontend: Show success, navigate

@enduml
