@startuml Item Management - Use Case Diagram

left to right direction

actor "User" as user
actor "Shared User" as shared
actor "System" as system

rectangle "Item Management System" {

    package "Item Addition" {
        usecase "Add Single Item" as UC1
        usecase "Add Multiple Items (Bulk)" as UC2
        usecase "Get Item Suggestions" as UC3
        usecase "Auto-Fill from History" as UC4
        usecase "Check for Duplicates" as UC5
    }

    package "Item Modification" {
        usecase "Update Item Details" as UC6
        usecase "Update Item Quantity" as UC7
        usecase "Increase Quantity" as UC8
        usecase "Decrease Quantity" as UC9
        usecase "Change Item Category" as UC10
    }

    package "Item Purchase" {
        usecase "Mark Item as Purchased" as UC11
        usecase "Record Actual Price" as UC12
        usecase "Undo Purchase" as UC13
        usecase "Record Partial Purchase" as UC14
    }

    package "Item Status" {
        usecase "Mark Item as Unavailable" as UC15
        usecase "Add Unavailability Reason" as UC16
        usecase "Remove Unavailable Status" as UC17
        usecase "View Item History" as UC18
    }

    package "Item Organization" {
        usecase "View Items by Category" as UC19
        usecase "Reorder Items" as UC20
        usecase "Filter Items by Status" as UC21
        usecase "Sort Items" as UC22
        usecase "Collapse/Expand Category" as UC23
    }

    package "Item Removal" {
        usecase "Remove Item from List" as UC24
        usecase "Undo Item Removal" as UC25
        usecase "Bulk Remove Items" as UC26
    }

    package "Price Tracking Integration" {
        usecase "Record Price History" as UC27
        usecase "Compare Estimated vs Actual" as UC28
        usecase "Suggest Better Prices" as UC29
    }

    package "Collaboration" {
        usecase "View Real-time Item Updates" as UC30
        usecase "See Who Added Item" as UC31
        usecase "Get Purchase Notifications" as UC32
    }
}

' User relationships
user --> UC1 : adds
user --> UC2 : bulk adds
user --> UC3 : requests
user --> UC6 : updates
user --> UC7 : changes
user --> UC11 : marks
user --> UC13 : undoes
user --> UC15 : marks
user --> UC19 : views
user --> UC20 : reorders
user --> UC21 : filters
user --> UC24 : removes
user --> UC25 : undoes

' Shared user relationships
shared --> UC1 : adds (if permitted)
shared --> UC6 : updates (if permitted)
shared --> UC11 : marks
shared --> UC30 : sees

' System relationships
system --> UC3 : generates
system --> UC5 : performs
system --> UC27 : records
system --> UC28 : analyzes
system --> UC29 : provides
system --> UC30 : syncs
system --> UC32 : sends

' Include relationships
UC1 .> UC3 : <<include>>
UC1 .> UC5 : <<include>>
UC2 .> UC5 : <<include>>
UC7 .> UC8 : <<extend>>
UC7 .> UC9 : <<extend>>
UC11 .> UC12 : <<extend>>
UC11 .> UC27 : <<include>>
UC15 .> UC16 : <<extend>>
UC24 .> UC25 : <<extend>>

' Extend relationships
UC4 ..> UC1 : <<extend>>
UC14 ..> UC11 : <<extend>>
UC17 ..> UC15 : <<extend>>
UC23 ..> UC19 : <<extend>>
UC26 ..> UC24 : <<extend>>

note right of UC5
  System automatically checks
  for duplicate items and
  prompts user to merge
end note

note right of UC11
  Marking an item as purchased
  can trigger list completion
  if all items are done
end note

note bottom of UC27
  Price history feeds into
  Price Tracking feature for
  analysis and suggestions
end note

note right of UC30
  Real-time sync ensures all
  shared users see updates
  immediately
end note

note bottom of UC3
  Suggestions based on:
  - User's purchase history
  - Common items in category
  - Popular items (anonymized)
end note

@enduml
