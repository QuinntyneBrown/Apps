@startuml MovieTVShowWatchlist Class Diagram

' Core Domain Entities
class User {
  +Guid Id
  +string Username
  +string Email
  +DateTime CreatedAt
  +List<WatchlistItem> Watchlist
  +List<ViewingRecord> ViewingHistory
  +List<Rating> Ratings
  +List<Review> Reviews
  +List<Favorite> Favorites
  +ViewingStreak Streak
  +List<Subscription> Subscriptions
}

class Movie {
  +Guid Id
  +string Title
  +int ReleaseYear
  +List<string> Genres
  +string Director
  +int Runtime
  +string ExternalId
  +DateTime CreatedAt
}

class TVShow {
  +Guid Id
  +string Title
  +int PremiereYear
  +List<string> Genres
  +int NumberOfSeasons
  +string Status
  +string ExternalId
  +DateTime CreatedAt
}

class Episode {
  +Guid Id
  +Guid ShowId
  +int SeasonNumber
  +int EpisodeNumber
  +string Title
  +DateTime AirDate
  +int Runtime
}

' Watchlist Management
class WatchlistItem {
  +Guid Id
  +Guid UserId
  +Guid ContentId
  +string ContentType
  +string Title
  +DateTime AddedDate
  +string PriorityLevel
  +int PriorityRank
  +string RecommendationSource
  +string MoodCategory
  +int WatchOrderPreference
}

' Viewing Activity
class ViewingRecord {
  +Guid Id
  +Guid UserId
  +Guid ContentId
  +string ContentType
  +DateTime WatchDate
  +string ViewingPlatform
  +string ViewingLocation
  +string ViewingContext
  +bool IsRewatch
  +int ViewingDuration
  +Guid BingeSessionId
}

class ShowProgress {
  +Guid Id
  +Guid UserId
  +Guid ShowId
  +int LastWatchedSeason
  +int LastWatchedEpisode
  +int TotalEpisodesWatched
  +int CompletedSeasons
  +bool IsCompleted
  +DateTime CompletionDate
}

class BingeSession {
  +Guid Id
  +Guid UserId
  +Guid ShowId
  +DateTime StartTime
  +DateTime EndTime
  +int EpisodesWatched
}

class AbandonedContent {
  +Guid Id
  +Guid UserId
  +Guid ContentId
  +string ContentType
  +DateTime AbandonDate
  +decimal ProgressPercent
  +string AbandonReason
  +decimal QualityRating
  +bool WouldRetry
}

' Rating and Review
class Rating {
  +Guid Id
  +Guid UserId
  +Guid ContentId
  +string ContentType
  +decimal RatingValue
  +string RatingScale
  +DateTime RatingDate
  +DateTime ViewingDate
  +bool IsRewatchRating
  +string Mood
}

class Review {
  +Guid Id
  +Guid UserId
  +Guid ContentId
  +string ContentType
  +string ReviewText
  +bool HasSpoilers
  +DateTime ReviewDate
  +bool WouldRecommend
  +string TargetAudience
  +List<string> ThemesDiscussed
}

class Favorite {
  +Guid Id
  +Guid UserId
  +Guid ContentId
  +string ContentType
  +DateTime AddedDate
  +string FavoriteCategory
  +int RewatchCount
  +string EmotionalSignificance
}

' Discovery and Recommendations
class RecommendationReceived {
  +Guid Id
  +Guid UserId
  +Guid ContentId
  +string Recommender
  +string RecommendationSource
  +string Reason
  +DateTime ReceptionDate
  +string InterestLevel
  +bool AddedToWatchlist
  +bool Watched
  +bool Liked
}

class RecommendationGiven {
  +Guid Id
  +Guid UserId
  +Guid ContentId
  +string Recipient
  +string RecommendationReason
  +string SharingMethod
  +DateTime ShareDate
  +string RecipientFeedback
}

class SimilarContent {
  +Guid Id
  +Guid SourceContentId
  +Guid SimilarContentId
  +decimal SimilarityScore
  +List<string> MatchReasons
  +string AlgorithmVersion
  +DateTime DiscoveryDate
}

class GenrePreference {
  +Guid Id
  +Guid UserId
  +string Genre
  +decimal PreferenceStrength
  +int ViewingCount
  +decimal AverageRating
  +string TrendDirection
  +DateTime LastUpdated
}

' Analytics and Tracking
class ViewingStreak {
  +Guid Id
  +Guid UserId
  +int CurrentStreak
  +int LongestStreak
  +DateTime LastWatchedDate
  +DateTime StreakStartDate
}

class Milestone {
  +Guid Id
  +Guid UserId
  +string MilestoneType
  +int MetricAchieved
  +DateTime AchievementDate
  +string CelebrationTier
}

class ViewingStatistics {
  +Guid Id
  +Guid UserId
  +string TimePeriod
  +DateTime PeriodStart
  +DateTime PeriodEnd
  +decimal TotalHours
  +int TotalMovies
  +int TotalShows
  +int TotalEpisodes
  +DateTime CalculatedAt
}

class YearInReview {
  +Guid Id
  +Guid UserId
  +int Year
  +int TotalMovies
  +int TotalShows
  +decimal TotalHours
  +List<string> TopGenres
  +List<Guid> TopRatedContent
  +DateTime GeneratedAt
}

' Streaming and Availability
class StreamingAvailability {
  +Guid Id
  +Guid ContentId
  +string Platform
  +bool IsAvailable
  +bool SubscriptionRequired
  +DateTime AvailabilityStart
  +DateTime AvailabilityEnd
  +List<string> RegionalRestrictions
  +DateTime LastChecked
}

class UserSubscription {
  +Guid Id
  +Guid UserId
  +string Platform
  +string SubscriptionTier
  +decimal MonthlyCost
  +DateTime StartDate
  +DateTime EndDate
  +string Status
}

class WatchParty {
  +Guid Id
  +Guid UserId
  +Guid ContentId
  +DateTime ScheduledDateTime
  +string Platform
  +string Host
  +string ViewingContext
  +string DiscussionPlan
  +string Status
  +List<Participant> Participants
}

class Participant {
  +Guid Id
  +Guid WatchPartyId
  +string ParticipantName
  +string ParticipantEmail
  +string RSVPStatus
}

class NewEpisodeAlert {
  +Guid Id
  +Guid UserId
  +Guid ShowId
  +string NotificationMethod
  +bool IsActive
}

' Domain Events (selected key events)
class MovieAddedToWatchlist <<DomainEvent>> {
  +Guid MovieId
  +string Title
  +DateTime AddedDate
  +string PriorityLevel
}

class MovieWatched <<DomainEvent>> {
  +Guid MovieId
  +DateTime WatchDate
  +string ViewingPlatform
  +bool IsRewatch
}

class MovieRated <<DomainEvent>> {
  +Guid MovieId
  +decimal RatingValue
  +DateTime RatingDate
}

class TVShowCompleted <<DomainEvent>> {
  +Guid ShowId
  +DateTime CompletionDate
  +int TotalEpisodes
  +TimeSpan TotalViewingTime
}

class ViewingMilestoneAchieved <<DomainEvent>> {
  +string MilestoneType
  +int MetricAchieved
  +DateTime AchievementDate
}

class ContentAvailabilityChanged <<DomainEvent>> {
  +Guid ContentId
  +string Platform
  +bool IsAvailable
  +DateTime ChangeDate
}

' Relationships
User "1" -- "*" WatchlistItem : has
User "1" -- "*" ViewingRecord : has
User "1" -- "*" Rating : gives
User "1" -- "*" Review : writes
User "1" -- "*" Favorite : marks
User "1" -- "1" ViewingStreak : has
User "1" -- "*" Milestone : achieves
User "1" -- "*" UserSubscription : manages
User "1" -- "*" WatchParty : schedules
User "1" -- "*" RecommendationReceived : receives
User "1" -- "*" RecommendationGiven : gives
User "1" -- "*" GenrePreference : has
User "1" -- "*" NewEpisodeAlert : subscribes

TVShow "1" -- "*" Episode : contains
TVShow "1" -- "*" ShowProgress : tracked by

WatchlistItem "*" -- "1" Movie : references
WatchlistItem "*" -- "1" TVShow : references

ViewingRecord "*" -- "1" Movie : records
ViewingRecord "*" -- "1" Episode : records

ShowProgress "*" -- "1" TVShow : tracks

Rating "*" -- "1" Movie : rates
Rating "*" -- "1" TVShow : rates

Review "*" -- "1" Movie : reviews
Review "*" -- "1" TVShow : reviews

Favorite "*" -- "1" Movie : favorites
Favorite "*" -- "1" TVShow : favorites

Movie "1" -- "*" StreamingAvailability : available on
TVShow "1" -- "*" StreamingAvailability : available on

WatchParty "1" -- "*" Participant : has
WatchParty "*" -- "1" Movie : for
WatchParty "*" -- "1" TVShow : for

SimilarContent "*" -- "1" Movie : relates to
SimilarContent "*" -- "1" TVShow : relates to

@enduml
