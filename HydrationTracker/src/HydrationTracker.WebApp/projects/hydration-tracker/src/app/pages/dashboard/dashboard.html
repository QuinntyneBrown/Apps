<div class="dashboard">
  <div class="dashboard__header">
    <h1 class="dashboard__title">Dashboard</h1>
  </div>

  <div class="dashboard__content">
    <div class="dashboard__grid">
      <mat-card class="dashboard__card dashboard__card--primary">
        <mat-card-header>
          <mat-icon class="dashboard__card-icon">water_drop</mat-icon>
          <mat-card-title>Today's Intake</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__stat">
            <span class="dashboard__stat-value">{{ totalToday }}</span>
            <span class="dashboard__stat-unit">ml</span>
          </div>
          <p class="dashboard__stat-label">{{ todayIntakes.length }} entries</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="dashboard__card dashboard__card--success" *ngIf="activeGoal">
        <mat-card-header>
          <mat-icon class="dashboard__card-icon">flag</mat-icon>
          <mat-card-title>Daily Goal</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__stat">
            <span class="dashboard__stat-value">{{ activeGoal.dailyGoalMl }}</span>
            <span class="dashboard__stat-unit">ml</span>
          </div>
          <mat-progress-bar
            mode="determinate"
            [value]="goalProgress"
            class="dashboard__progress">
          </mat-progress-bar>
          <p class="dashboard__stat-label">{{ goalProgress | number:'1.0-0' }}% complete</p>
        </mat-card-content>
      </mat-card>

      <mat-card class="dashboard__card dashboard__card--info">
        <mat-card-header>
          <mat-icon class="dashboard__card-icon">trending_up</mat-icon>
          <mat-card-title>Remaining</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__stat" *ngIf="activeGoal">
            <span class="dashboard__stat-value">{{ activeGoal.dailyGoalMl - totalToday }}</span>
            <span class="dashboard__stat-unit">ml</span>
          </div>
          <p class="dashboard__stat-label" *ngIf="!activeGoal">No active goal</p>
        </mat-card-content>
      </mat-card>
    </div>

    <mat-card class="dashboard__recent">
      <mat-card-header>
        <mat-card-title>Recent Intakes</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__recent-list" *ngIf="todayIntakes.length > 0; else noIntakes">
          <div class="dashboard__recent-item" *ngFor="let intake of todayIntakes.slice(0, 5)">
            <mat-icon class="dashboard__recent-icon">local_drink</mat-icon>
            <div class="dashboard__recent-details">
              <span class="dashboard__recent-amount">{{ intake.amountMl }} ml</span>
              <span class="dashboard__recent-time">{{ intake.intakeTime | date:'short' }}</span>
            </div>
          </div>
        </div>
        <ng-template #noIntakes>
          <p class="dashboard__empty">No intakes recorded today</p>
        </ng-template>
      </mat-card-content>
    </mat-card>
  </div>
</div>
