<div class="dashboard" *ngIf="viewModel$ | async as vm">
  <div class="dashboard__header">
    <h1 class="dashboard__title">Dashboard</h1>
  </div>

  <div class="dashboard__stats">
    <mat-card class="dashboard__stat-card">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">two_wheeler</mat-icon>
        <mat-card-title>Motorcycles</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-number">{{ vm.totalMotorcycles }}</div>
        <div class="dashboard__stat-label">Total motorcycles</div>
      </mat-card-content>
      <mat-card-actions>
        <a mat-button routerLink="/motorcycles" color="primary">View All</a>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__stat-card">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">route</mat-icon>
        <mat-card-title>Rides</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-number">{{ vm.totalRides }}</div>
        <div class="dashboard__stat-label">{{ vm.totalMileage | number:'1.0-1' }} total miles</div>
      </mat-card-content>
      <mat-card-actions>
        <a mat-button routerLink="/rides" color="primary">View All</a>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__stat-card">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">build</mat-icon>
        <mat-card-title>Maintenance</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-number">{{ vm.totalMaintenance }}</div>
        <div class="dashboard__stat-label">Total records</div>
      </mat-card-content>
      <mat-card-actions>
        <a mat-button routerLink="/maintenance" color="primary">View All</a>
      </mat-card-actions>
    </mat-card>

    <mat-card class="dashboard__stat-card">
      <mat-card-header>
        <mat-icon class="dashboard__stat-icon">map</mat-icon>
        <mat-card-title>Routes</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__stat-number">{{ vm.totalRoutes }}</div>
        <div class="dashboard__stat-label" *ngIf="vm.favoriteRoutes.length > 0">
          {{ vm.favoriteRoutes.length }} favorites
        </div>
      </mat-card-content>
      <mat-card-actions>
        <a mat-button routerLink="/routes" color="primary">View All</a>
      </mat-card-actions>
    </mat-card>
  </div>

  <div class="dashboard__sections">
    <mat-card class="dashboard__section" *ngIf="vm.recentRides.length > 0">
      <mat-card-header>
        <mat-card-title>Recent Rides</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__list">
          <div class="dashboard__list-item" *ngFor="let ride of vm.recentRides">
            <div class="dashboard__list-item-content">
              <div class="dashboard__list-item-title">{{ ride.startLocation || 'Unknown' }} - {{ ride.endLocation || 'Unknown' }}</div>
              <div class="dashboard__list-item-subtitle">{{ ride.rideDate | date:'short' }} - {{ ride.distanceMiles }} miles</div>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="dashboard__section" *ngIf="vm.upcomingMaintenance.length > 0">
      <mat-card-header>
        <mat-card-title>Recent Maintenance</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="dashboard__list">
          <div class="dashboard__list-item" *ngFor="let maintenance of vm.upcomingMaintenance">
            <div class="dashboard__list-item-content">
              <div class="dashboard__list-item-title">{{ maintenance.description }}</div>
              <div class="dashboard__list-item-subtitle">{{ maintenance.maintenanceDate | date:'short' }}</div>
            </div>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
