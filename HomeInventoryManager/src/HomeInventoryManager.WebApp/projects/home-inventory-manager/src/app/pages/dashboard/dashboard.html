<div class="dashboard">
  <div class="dashboard__container" *ngIf="!(loading$ | async); else loadingTemplate">
    <h1 class="dashboard__title">Dashboard</h1>

    <div class="dashboard__stats">
      <mat-card class="dashboard__stat-card">
        <mat-card-header>
          <mat-icon class="dashboard__stat-icon dashboard__stat-icon--primary">inventory_2</mat-icon>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__stat-value">{{ totalItems }}</div>
          <div class="dashboard__stat-label">Total Items</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="dashboard__stat-card">
        <mat-card-header>
          <mat-icon class="dashboard__stat-icon dashboard__stat-icon--success">attach_money</mat-icon>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__stat-value">{{ formatCurrency(totalValue) }}</div>
          <div class="dashboard__stat-label">Total Value</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="dashboard__stat-card">
        <mat-card-header>
          <mat-icon class="dashboard__stat-icon dashboard__stat-icon--accent">assessment</mat-icon>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__stat-value">{{ estimatesCount }}</div>
          <div class="dashboard__stat-label">Value Estimates</div>
        </mat-card-content>
      </mat-card>
    </div>

    <div class="dashboard__sections">
      <mat-card class="dashboard__section">
        <mat-card-header class="dashboard__section-header">
          <mat-card-title>Recent Items</mat-card-title>
          <button mat-button color="primary" (click)="navigateToItems()">View All</button>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__recent-items" *ngIf="recentItems.length > 0; else noItemsTemplate">
            <div class="dashboard__recent-item" *ngFor="let item of recentItems">
              <div class="dashboard__recent-item-info">
                <div class="dashboard__recent-item-name">{{ item.name }}</div>
                <div class="dashboard__recent-item-meta">
                  {{ categoryLabels[item.category] }} â€¢ {{ roomLabels[item.room] }}
                </div>
              </div>
              <div class="dashboard__recent-item-value" *ngIf="item.currentValue">
                {{ formatCurrency(item.currentValue) }}
              </div>
            </div>
          </div>
          <ng-template #noItemsTemplate>
            <div class="dashboard__empty">
              <mat-icon>inventory_2</mat-icon>
              <p>No items yet. Start adding items to your inventory!</p>
              <button mat-raised-button color="primary" (click)="navigateToItems()">Add Items</button>
            </div>
          </ng-template>
        </mat-card-content>
      </mat-card>

      <mat-card class="dashboard__section">
        <mat-card-header class="dashboard__section-header">
          <mat-card-title>Quick Actions</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__actions">
            <button mat-raised-button color="primary" class="dashboard__action" (click)="navigateToItems()">
              <mat-icon>add</mat-icon>
              Add New Item
            </button>
            <button mat-raised-button color="accent" class="dashboard__action" (click)="navigateToValueEstimates()">
              <mat-icon>assessment</mat-icon>
              Add Value Estimate
            </button>
            <button mat-raised-button class="dashboard__action" (click)="navigateToItems()">
              <mat-icon>list</mat-icon>
              View All Items
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <ng-template #loadingTemplate>
    <div class="dashboard__loading">
      <mat-spinner></mat-spinner>
    </div>
  </ng-template>
</div>
